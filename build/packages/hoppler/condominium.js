var ws=Object.create;var Pt=Object.defineProperty;var ks=Object.getOwnPropertyDescriptor;var Es=Object.getOwnPropertyNames;var Ts=Object.getPrototypeOf,Ss=Object.prototype.hasOwnProperty;var i=(t,e)=>Pt(t,"name",{value:e,configurable:!0});var Gr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),xs=(t,e)=>{for(var r in e)Pt(t,r,{get:e[r],enumerable:!0})},Fr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Es(e))!Ss.call(t,s)&&s!==r&&Pt(t,s,{get:()=>e[s],enumerable:!(n=ks(e,s))||n.enumerable});return t};var We=(t,e,r)=>(r=t!=null?ws(Ts(t)):{},Fr(e||!t||!t.__esModule?Pt(r,"default",{value:t,enumerable:!0}):r,t)),Os=t=>Fr(Pt({},"__esModule",{value:!0}),t);var rn=Gr((xi,xa)=>{xa.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var on=Gr((Oi,Ze)=>{var nn=require("fs"),fr=require("path"),Oa=require("os"),Aa=require("crypto"),Na=rn(),hr=Na.version,Ca=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Ia(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=Ca.exec(r))!=null;){let s=n[1],a=n[2]||"";a=a.trim();let o=a[0];a=a.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(a=a.replace(/\\n/g,`
`),a=a.replace(/\\r/g,"\r")),e[s]=a}return e}i(Ia,"parse");function ja(t){let e=an(t),r=ee.configDotenv({path:e});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);let n=sn(t).split(","),s=n.length,a;for(let o=0;o<s;o++)try{let c=n[o].trim(),d=Da(r,c);a=ee.decrypt(d.ciphertext,d.key);break}catch(c){if(o+1>=s)throw c}return ee.parse(a)}i(ja,"_parseVault");function Ra(t){console.log(`[dotenv@${hr}][INFO] ${t}`)}i(Ra,"_log");function Pa(t){console.log(`[dotenv@${hr}][WARN] ${t}`)}i(Pa,"_warn");function dr(t){console.log(`[dotenv@${hr}][DEBUG] ${t}`)}i(dr,"_debug");function sn(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}i(sn,"_dotenvKey");function Da(t,e){let r;try{r=new URL(e)}catch(c){throw c.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):c}let n=r.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let s=r.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let a=`DOTENV_VAULT_${s.toUpperCase()}`,o=t.parsed[a];if(!o)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${a} in your .env.vault file.`);return{ciphertext:o,key:n}}i(Da,"_instructions");function an(t){let e=fr.resolve(process.cwd(),".env");return t&&t.path&&t.path.length>0&&(e=t.path),e.endsWith(".vault")?e:`${e}.vault`}i(an,"_vaultPath");function Ba(t){return t[0]==="~"?fr.join(Oa.homedir(),t.slice(1)):t}i(Ba,"_resolveHome");function Ma(t){Ra("Loading env from encrypted .env.vault");let e=ee._parseVault(t),r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),ee.populate(r,e,t),{parsed:e}}i(Ma,"_configVault");function Ua(t){let e=fr.resolve(process.cwd(),".env"),r="utf8",n=Boolean(t&&t.debug);t&&(t.path!=null&&(e=Ba(t.path)),t.encoding!=null&&(r=t.encoding));try{let s=ee.parse(nn.readFileSync(e,{encoding:r})),a=process.env;return t&&t.processEnv!=null&&(a=t.processEnv),ee.populate(a,s,t),{parsed:s}}catch(s){return n&&dr(`Failed to load ${e} ${s.message}`),{error:s}}}i(Ua,"configDotenv");function $a(t){let e=an(t);return sn(t).length===0?ee.configDotenv(t):nn.existsSync(e)?ee._configVault(t):(Pa(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),ee.configDotenv(t))}i($a,"config");function La(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),s=n.slice(0,12),a=n.slice(-16);n=n.slice(12,-16);try{let o=Aa.createDecipheriv("aes-256-gcm",r,s);return o.setAuthTag(a),`${o.update(n)}${o.final()}`}catch(o){let c=o instanceof RangeError,d=o.message==="Invalid key length",f=o.message==="Unsupported state or unable to authenticate data";if(c||d){let y="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(y)}else if(f){let y="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(y)}else throw console.error("Error: ",o.code),console.error("Error: ",o.message),o}}i(La,"decrypt");function Va(t,e,r={}){let n=Boolean(r&&r.debug),s=Boolean(r&&r.override);if(typeof e!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let a of Object.keys(e))Object.prototype.hasOwnProperty.call(t,a)?(s===!0&&(t[a]=e[a]),n&&dr(s===!0?`"${a}" is already defined and WAS overwritten`:`"${a}" is already defined and was NOT overwritten`)):t[a]=e[a]}i(Va,"populate");var ee={configDotenv:Ua,_configVault:Ma,_parseVault:ja,config:$a,decrypt:La,parse:Ia,populate:Va};Ze.exports.configDotenv=ee.configDotenv;Ze.exports._configVault=ee._configVault;Ze.exports._parseVault=ee._parseVault;Ze.exports.config=ee.config;Ze.exports.decrypt=ee.decrypt;Ze.exports.parse=ee.parse;Ze.exports.populate=ee.populate;Ze.exports=ee});var _i={};xs(_i,{main:()=>vi});module.exports=Os(_i);var R;(function(t){t.assertEqual=s=>s;function e(s){}i(e,"assertIs"),t.assertIs=e;function r(s){throw new Error}i(r,"assertNever"),t.assertNever=r,t.arrayToEnum=s=>{let a={};for(let o of s)a[o]=o;return a},t.getValidEnumValues=s=>{let a=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(let c of a)o[c]=s[c];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let a=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(let o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}i(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(R||(R={}));var or;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(or||(or={}));var g=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ye=i(t=>{switch(typeof t){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(t)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(t)?g.array:t===null?g.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?g.promise:typeof Map<"u"&&t instanceof Map?g.map:typeof Set<"u"&&t instanceof Set?g.set:typeof Date<"u"&&t instanceof Date?g.date:g.object;default:return g.unknown}},"getParsedType"),h=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),As=i(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),pe=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(a){return a.message},n={_errors:[]},s=i(a=>{for(let o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let c=n,d=0;for(;d<o.path.length;){let f=o.path[d];d===o.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(r(o))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}},"processError");return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};i(pe,"ZodError");pe.create=t=>new pe(t);var Bt=i((t,e)=>{let r;switch(t.code){case h.invalid_type:t.received===g.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case h.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,R.jsonStringifyReplacer)}`;break;case h.unrecognized_keys:r=`Unrecognized key(s) in object: ${R.joinValues(t.keys,", ")}`;break;case h.invalid_union:r="Invalid input";break;case h.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${R.joinValues(t.options)}`;break;case h.invalid_enum_value:r=`Invalid enum value. Expected ${R.joinValues(t.options)}, received '${t.received}'`;break;case h.invalid_arguments:r="Invalid function arguments";break;case h.invalid_return_type:r="Invalid function return type";break;case h.invalid_date:r="Invalid date";break;case h.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:R.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case h.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case h.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case h.custom:r="Invalid input";break;case h.invalid_intersection_types:r="Intersection results could not be merged";break;case h.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case h.not_finite:r="Number must be finite";break;default:r=e.defaultError,R.assertNever(t)}return{message:r}},"errorMap"),Yr=Bt;function Ns(t){Yr=t}i(Ns,"setErrorMap");function Gt(){return Yr}i(Gt,"getErrorMap");var Ft=i(t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],o={...s,path:a},c="",d=n.filter(f=>!!f).slice().reverse();for(let f of d)c=f(o,{data:e,defaultError:c}).message;return{...s,path:a,message:s.message||c}},"makeIssue"),Cs=[];function _(t,e){let r=Ft({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Gt(),Bt].filter(n=>!!n)});t.common.issues.push(r)}i(_,"addIssueToContext");var X=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return O;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r)n.push({key:await s.key,value:await s.value});return X.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return O;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||s.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}};i(X,"ParseStatus");var O=Object.freeze({status:"aborted"}),Hr=i(t=>({status:"dirty",value:t}),"DIRTY"),le=i(t=>({status:"valid",value:t}),"OK"),cr=i(t=>t.status==="aborted","isAborted"),ur=i(t=>t.status==="dirty","isDirty"),Kt=i(t=>t.status==="valid","isValid"),Wt=i(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync"),k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var _e=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}};i(_e,"ParseInputLazyPath");var Kr=i((t,e)=>{if(Kt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new pe(t.common.issues);return this._error=r,this._error}}},"handleResult");function N(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:i((o,c)=>o.code!=="invalid_type"?{message:c.defaultError}:typeof c.data>"u"?{message:n??c.defaultError}:{message:r??c.defaultError},"customMap"),description:s}}i(N,"processCreateParams");var A=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ye(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new X,ctx:{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Wt(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},a=this._parseSync({data:e,path:s.path,parent:s});return Kr(s,a)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(Wt(s)?s:Promise.resolve(s));return Kr(n,a)}refine(e,r){let n=i(s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r,"getIssueProperties");return this._refinement((s,a)=>{let o=e(s),c=i(()=>a.addIssue({code:h.custom,...n(s)}),"setError");return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ge({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Te.create(this,this._def)}nullable(){return De.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return me.create(this,this._def)}promise(){return ze.create(this,this._def)}or(e){return Xe.create([this,e],this._def)}and(e){return qe.create(this,e,this._def)}transform(e){return new ge({...N(this._def),schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new st({...N(this._def),innerType:this,defaultValue:r,typeName:x.ZodDefault})}brand(){return new Dt({typeName:x.ZodBranded,type:this,...N(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ht({...N(this._def),innerType:this,catchValue:r,typeName:x.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return at.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};i(A,"ZodType");var Is=/^c[^\s-]{8,}$/i,js=/^[a-z][a-z0-9]*$/,Rs=/[0-9A-HJKMNP-TV-Z]{26}/,Ps=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Ds=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Bs=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Ms=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Us=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,$s=i(t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$"),"datetimeRegex");function Ls(t,e){return!!((e==="v4"||!e)&&Ms.test(t)||(e==="v6"||!e)&&Us.test(t))}i(Ls,"isValidIP");var he=class extends A{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(s=>e.test(s),{validation:r,code:h.invalid_string,...k.errToObj(n)}),this.nonempty=e=>this.min(1,k.errToObj(e)),this.trim=()=>new he({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new he({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new he({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==g.string){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.string,received:a.parsedType}),O}let n=new X,s;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(s=this._getOrReturnCtx(e,s),o?_(s,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&_(s,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Ds.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"email",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Bs.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"emoji",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Ps.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"uuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Is.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"cuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")js.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"cuid2",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Rs.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"ulid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),_(s,{validation:"url",code:h.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"regex",code:h.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?$s(a).test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="ip"?Ls(e.data,a.version)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"ip",code:h.invalid_string,message:a.message}),n.dirty()):R.assertNever(a);return{status:n.value,value:e.data}}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...k.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...k.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...k.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...k.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...k.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...k.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};i(he,"ZodString");he.create=t=>{var e;return new he({checks:[],typeName:x.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...N(t)})};function Vs(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return a%o/Math.pow(10,s)}i(Vs,"floatSafeRemainder");var Oe=class extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.number,received:a.parsedType}),O}let n,s=new X;for(let a of this._def.checks)a.kind==="int"?R.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:h.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?Vs(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:h.not_finite,message:a.message}),s.dirty()):R.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,n,s){return new Oe({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:k.toString(s)}]})}_addCheck(e){return new Oe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&R.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};i(Oe,"ZodNumber");Oe.create=t=>new Oe({checks:[],typeName:x.ZodNumber,coerce:t?.coerce||!1,...N(t)});var Ae=class extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==g.bigint){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.bigint,received:a.parsedType}),O}let n,s=new X;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):R.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,n,s){return new Ae({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:k.toString(s)}]})}_addCheck(e){return new Ae({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};i(Ae,"ZodBigInt");Ae.create=t=>{var e;return new Ae({checks:[],typeName:x.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...N(t)})};var He=class extends A{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==g.boolean){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.boolean,received:n.parsedType}),O}return le(e.data)}};i(He,"ZodBoolean");He.create=t=>new He({typeName:x.ZodBoolean,coerce:t?.coerce||!1,...N(t)});var je=class extends A{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.date,received:a.parsedType}),O}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_date}),O}let n=new X,s;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):R.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new je({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};i(je,"ZodDate");je.create=t=>new je({checks:[],coerce:t?.coerce||!1,typeName:x.ZodDate,...N(t)});var ut=class extends A{_parse(e){if(this._getType(e)!==g.symbol){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.symbol,received:n.parsedType}),O}return le(e.data)}};i(ut,"ZodSymbol");ut.create=t=>new ut({typeName:x.ZodSymbol,...N(t)});var Qe=class extends A{_parse(e){if(this._getType(e)!==g.undefined){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.undefined,received:n.parsedType}),O}return le(e.data)}};i(Qe,"ZodUndefined");Qe.create=t=>new Qe({typeName:x.ZodUndefined,...N(t)});var Je=class extends A{_parse(e){if(this._getType(e)!==g.null){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.null,received:n.parsedType}),O}return le(e.data)}};i(Je,"ZodNull");Je.create=t=>new Je({typeName:x.ZodNull,...N(t)});var Le=class extends A{constructor(){super(...arguments),this._any=!0}_parse(e){return le(e.data)}};i(Le,"ZodAny");Le.create=t=>new Le({typeName:x.ZodAny,...N(t)});var Re=class extends A{constructor(){super(...arguments),this._unknown=!0}_parse(e){return le(e.data)}};i(Re,"ZodUnknown");Re.create=t=>new Re({typeName:x.ZodUnknown,...N(t)});var Ee=class extends A{_parse(e){let r=this._getOrReturnCtx(e);return _(r,{code:h.invalid_type,expected:g.never,received:r.parsedType}),O}};i(Ee,"ZodNever");Ee.create=t=>new Ee({typeName:x.ZodNever,...N(t)});var lt=class extends A{_parse(e){if(this._getType(e)!==g.undefined){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.void,received:n.parsedType}),O}return le(e.data)}};i(lt,"ZodVoid");lt.create=t=>new lt({typeName:x.ZodVoid,...N(t)});var me=class extends A{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==g.array)return _(r,{code:h.invalid_type,expected:g.array,received:r.parsedType}),O;if(s.exactLength!==null){let o=r.data.length>s.exactLength.value,c=r.data.length<s.exactLength.value;(o||c)&&(_(r,{code:o?h.too_big:h.too_small,minimum:c?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(_(r,{code:h.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(_(r,{code:h.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,c)=>s.type._parseAsync(new _e(r,o,r.path,c)))).then(o=>X.mergeArray(n,o));let a=[...r.data].map((o,c)=>s.type._parseSync(new _e(r,o,r.path,c)));return X.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new me({...this._def,minLength:{value:e,message:k.toString(r)}})}max(e,r){return new me({...this._def,maxLength:{value:e,message:k.toString(r)}})}length(e,r){return new me({...this._def,exactLength:{value:e,message:k.toString(r)}})}nonempty(e){return this.min(1,e)}};i(me,"ZodArray");me.create=(t,e)=>new me({type:t,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...N(e)});function Et(t){if(t instanceof V){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Te.create(Et(n))}return new V({...t._def,shape:()=>e})}else return t instanceof me?new me({...t._def,type:Et(t.element)}):t instanceof Te?Te.create(Et(t.unwrap())):t instanceof De?De.create(Et(t.unwrap())):t instanceof be?be.create(t.items.map(e=>Et(e))):t}i(Et,"deepPartialify");var V=class extends A{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=R.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==g.object){let f=this._getOrReturnCtx(e);return _(f,{code:h.invalid_type,expected:g.object,received:f.parsedType}),O}let{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ee&&this._def.unknownKeys==="strip"))for(let f in s.data)o.includes(f)||c.push(f);let d=[];for(let f of o){let y=a[f],T=s.data[f];d.push({key:{status:"valid",value:f},value:y._parse(new _e(s,T,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof Ee){let f=this._def.unknownKeys;if(f==="passthrough")for(let y of c)d.push({key:{status:"valid",value:y},value:{status:"valid",value:s.data[y]}});else if(f==="strict")c.length>0&&(_(s,{code:h.unrecognized_keys,keys:c}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let f=this._def.catchall;for(let y of c){let T=s.data[y];d.push({key:{status:"valid",value:y},value:f._parse(new _e(s,T,s.path,y)),alwaysSet:y in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let f=[];for(let y of d){let T=await y.key;f.push({key:T,value:await y.value,alwaysSet:y.alwaysSet})}return f}).then(f=>X.mergeObjectSync(n,f)):X.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new V({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,a,o,c;let d=(o=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=k.errToObj(e).message)!==null&&c!==void 0?c:d}:{message:d}}}:{}})}strip(){return new V({...this._def,unknownKeys:"strip"})}passthrough(){return new V({...this._def,unknownKeys:"passthrough"})}extend(e){return new V({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new V({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:x.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new V({...this._def,catchall:e})}pick(e){let r={};return R.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new V({...this._def,shape:()=>r})}omit(e){let r={};return R.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new V({...this._def,shape:()=>r})}deepPartial(){return Et(this)}partial(e){let r={};return R.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new V({...this._def,shape:()=>r})}required(e){let r={};return R.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Te;)a=a._def.innerType;r[n]=a}}),new V({...this._def,shape:()=>r})}keyof(){return Qr(R.objectKeys(this.shape))}};i(V,"ZodObject");V.create=(t,e)=>new V({shape:()=>t,unknownKeys:"strip",catchall:Ee.create(),typeName:x.ZodObject,...N(e)});V.strictCreate=(t,e)=>new V({shape:()=>t,unknownKeys:"strict",catchall:Ee.create(),typeName:x.ZodObject,...N(e)});V.lazycreate=(t,e)=>new V({shape:t,unknownKeys:"strip",catchall:Ee.create(),typeName:x.ZodObject,...N(e)});var Xe=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(let c of a)if(c.result.status==="valid")return c.result;for(let c of a)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let o=a.map(c=>new pe(c.ctx.common.issues));return _(r,{code:h.invalid_union,unionErrors:o}),O}if(i(s,"handleResults"),r.common.async)return Promise.all(n.map(async a=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let a,o=[];for(let d of n){let f={...r,common:{...r.common,issues:[]},parent:null},y=d._parseSync({data:r.data,path:r.path,parent:f});if(y.status==="valid")return y;y.status==="dirty"&&!a&&(a={result:y,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let c=o.map(d=>new pe(d));return _(r,{code:h.invalid_union,unionErrors:c}),O}}get options(){return this._def.options}};i(Xe,"ZodUnion");Xe.create=(t,e)=>new Xe({options:t,typeName:x.ZodUnion,...N(e)});var Zt=i(t=>t instanceof tt?Zt(t.schema):t instanceof ge?Zt(t.innerType()):t instanceof rt?[t.value]:t instanceof Ne?t.options:t instanceof nt?Object.keys(t.enum):t instanceof st?Zt(t._def.innerType):t instanceof Qe?[void 0]:t instanceof Je?[null]:null,"getDiscriminator"),dt=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.object)return _(r,{code:h.invalid_type,expected:g.object,received:r.parsedType}),O;let n=this.discriminator,s=r.data[n],a=this.optionsMap.get(s);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(_(r,{code:h.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),O)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let a of r){let o=Zt(a.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of o){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,a)}}return new dt({typeName:x.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...N(n)})}};i(dt,"ZodDiscriminatedUnion");function lr(t,e){let r=Ye(t),n=Ye(e);if(t===e)return{valid:!0,data:t};if(r===g.object&&n===g.object){let s=R.objectKeys(e),a=R.objectKeys(t).filter(c=>s.indexOf(c)!==-1),o={...t,...e};for(let c of a){let d=lr(t[c],e[c]);if(!d.valid)return{valid:!1};o[c]=d.data}return{valid:!0,data:o}}else if(r===g.array&&n===g.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let a=0;a<t.length;a++){let o=t[a],c=e[a],d=lr(o,c);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return r===g.date&&n===g.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}i(lr,"mergeValues");var qe=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=i((a,o)=>{if(cr(a)||cr(o))return O;let c=lr(a.value,o.value);return c.valid?((ur(a)||ur(o))&&r.dirty(),{status:r.value,value:c.data}):(_(n,{code:h.invalid_intersection_types}),O)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};i(qe,"ZodIntersection");qe.create=(t,e,r)=>new qe({left:t,right:e,typeName:x.ZodIntersection,...N(r)});var be=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.array)return _(n,{code:h.invalid_type,expected:g.array,received:n.parsedType}),O;if(n.data.length<this._def.items.length)return _(n,{code:h.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),O;!this._def.rest&&n.data.length>this._def.items.length&&(_(n,{code:h.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((o,c)=>{let d=this._def.items[c]||this._def.rest;return d?d._parse(new _e(n,o,n.path,c)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>X.mergeArray(r,o)):X.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new be({...this._def,rest:e})}};i(be,"ZodTuple");be.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new be({items:t,typeName:x.ZodTuple,rest:null,...N(e)})};var et=class extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.object)return _(n,{code:h.invalid_type,expected:g.object,received:n.parsedType}),O;let s=[],a=this._def.keyType,o=this._def.valueType;for(let c in n.data)s.push({key:a._parse(new _e(n,c,n.path,c)),value:o._parse(new _e(n,n.data[c],n.path,c))});return n.common.async?X.mergeObjectAsync(r,s):X.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof A?new et({keyType:e,valueType:r,typeName:x.ZodRecord,...N(n)}):new et({keyType:he.create(),valueType:e,typeName:x.ZodRecord,...N(r)})}};i(et,"ZodRecord");var ft=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.map)return _(n,{code:h.invalid_type,expected:g.map,received:n.parsedType}),O;let s=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([c,d],f)=>({key:s._parse(new _e(n,c,n.path,[f,"key"])),value:a._parse(new _e(n,d,n.path,[f,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let d of o){let f=await d.key,y=await d.value;if(f.status==="aborted"||y.status==="aborted")return O;(f.status==="dirty"||y.status==="dirty")&&r.dirty(),c.set(f.value,y.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let d of o){let f=d.key,y=d.value;if(f.status==="aborted"||y.status==="aborted")return O;(f.status==="dirty"||y.status==="dirty")&&r.dirty(),c.set(f.value,y.value)}return{status:r.value,value:c}}}};i(ft,"ZodMap");ft.create=(t,e,r)=>new ft({valueType:e,keyType:t,typeName:x.ZodMap,...N(r)});var Pe=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.set)return _(n,{code:h.invalid_type,expected:g.set,received:n.parsedType}),O;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(_(n,{code:h.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(_(n,{code:h.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let a=this._def.valueType;function o(d){let f=new Set;for(let y of d){if(y.status==="aborted")return O;y.status==="dirty"&&r.dirty(),f.add(y.value)}return{status:r.value,value:f}}i(o,"finalizeSet");let c=[...n.data.values()].map((d,f)=>a._parse(new _e(n,d,n.path,f)));return n.common.async?Promise.all(c).then(d=>o(d)):o(c)}min(e,r){return new Pe({...this._def,minSize:{value:e,message:k.toString(r)}})}max(e,r){return new Pe({...this._def,maxSize:{value:e,message:k.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};i(Pe,"ZodSet");Pe.create=(t,e)=>new Pe({valueType:t,minSize:null,maxSize:null,typeName:x.ZodSet,...N(e)});var Ve=class extends A{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.function)return _(r,{code:h.invalid_type,expected:g.function,received:r.parsedType}),O;function n(c,d){return Ft({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Gt(),Bt].filter(f=>!!f),issueData:{code:h.invalid_arguments,argumentsError:d}})}i(n,"makeArgsIssue");function s(c,d){return Ft({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Gt(),Bt].filter(f=>!!f),issueData:{code:h.invalid_return_type,returnTypeError:d}})}i(s,"makeReturnsIssue");let a={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof ze?le(async(...c)=>{let d=new pe([]),f=await this._def.args.parseAsync(c,a).catch(S=>{throw d.addIssue(n(c,S)),d}),y=await o(...f);return await this._def.returns._def.type.parseAsync(y,a).catch(S=>{throw d.addIssue(s(y,S)),d})}):le((...c)=>{let d=this._def.args.safeParse(c,a);if(!d.success)throw new pe([n(c,d.error)]);let f=o(...d.data),y=this._def.returns.safeParse(f,a);if(!y.success)throw new pe([s(f,y.error)]);return y.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ve({...this._def,args:be.create(e).rest(Re.create())})}returns(e){return new Ve({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new Ve({args:e||be.create([]).rest(Re.create()),returns:r||Re.create(),typeName:x.ZodFunction,...N(n)})}};i(Ve,"ZodFunction");var tt=class extends A{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};i(tt,"ZodLazy");tt.create=(t,e)=>new tt({getter:t,typeName:x.ZodLazy,...N(e)});var rt=class extends A{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return _(r,{received:r.data,code:h.invalid_literal,expected:this._def.value}),O}return{status:"valid",value:e.data}}get value(){return this._def.value}};i(rt,"ZodLiteral");rt.create=(t,e)=>new rt({value:t,typeName:x.ZodLiteral,...N(e)});function Qr(t,e){return new Ne({values:t,typeName:x.ZodEnum,...N(e)})}i(Qr,"createZodEnum");var Ne=class extends A{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return _(r,{expected:R.joinValues(n),received:r.parsedType,code:h.invalid_type}),O}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return _(r,{received:r.data,code:h.invalid_enum_value,options:n}),O}return le(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return Ne.create(e)}exclude(e){return Ne.create(this.options.filter(r=>!e.includes(r)))}};i(Ne,"ZodEnum");Ne.create=Qr;var nt=class extends A{_parse(e){let r=R.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==g.string&&n.parsedType!==g.number){let s=R.objectValues(r);return _(n,{expected:R.joinValues(s),received:n.parsedType,code:h.invalid_type}),O}if(r.indexOf(e.data)===-1){let s=R.objectValues(r);return _(n,{received:n.data,code:h.invalid_enum_value,options:s}),O}return le(e.data)}get enum(){return this._def.values}};i(nt,"ZodNativeEnum");nt.create=(t,e)=>new nt({values:t,typeName:x.ZodNativeEnum,...N(e)});var ze=class extends A{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.promise&&r.common.async===!1)return _(r,{code:h.invalid_type,expected:g.promise,received:r.parsedType}),O;let n=r.parsedType===g.promise?r.data:Promise.resolve(r.data);return le(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};i(ze,"ZodPromise");ze.create=(t,e)=>new ze({type:t,typeName:x.ZodPromise,...N(e)});var ge=class extends A{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){let o=s.transform(n.data);return n.common.async?Promise.resolve(o).then(c=>this._def.schema._parseAsync({data:c,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}let a={addIssue:o=>{_(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="refinement"){let o=i(c=>{let d=s.refinement(c,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?O:(c.status==="dirty"&&r.dirty(),o(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?O:(c.status==="dirty"&&r.dirty(),o(c.value).then(()=>({status:r.value,value:c.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Kt(o))return o;let c=s.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Kt(o)?Promise.resolve(s.transform(o.value,a)).then(c=>({status:r.value,value:c})):o);R.assertNever(s)}};i(ge,"ZodEffects");ge.create=(t,e,r)=>new ge({schema:t,typeName:x.ZodEffects,effect:e,...N(r)});ge.createWithPreprocess=(t,e,r)=>new ge({schema:e,effect:{type:"preprocess",transform:t},typeName:x.ZodEffects,...N(r)});var Te=class extends A{_parse(e){return this._getType(e)===g.undefined?le(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};i(Te,"ZodOptional");Te.create=(t,e)=>new Te({innerType:t,typeName:x.ZodOptional,...N(e)});var De=class extends A{_parse(e){return this._getType(e)===g.null?le(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};i(De,"ZodNullable");De.create=(t,e)=>new De({innerType:t,typeName:x.ZodNullable,...N(e)});var st=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===g.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};i(st,"ZodDefault");st.create=(t,e)=>new st({innerType:t,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...N(e)});var ht=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Wt(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new pe(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new pe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};i(ht,"ZodCatch");ht.create=(t,e)=>new ht({innerType:t,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...N(e)});var pt=class extends A{_parse(e){if(this._getType(e)!==g.nan){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.nan,received:n.parsedType}),O}return{status:"valid",value:e.data}}};i(pt,"ZodNaN");pt.create=t=>new pt({typeName:x.ZodNaN,...N(t)});var zs=Symbol("zod_brand"),Dt=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}};i(Dt,"ZodBranded");var at=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return i(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?O:a.status==="dirty"?(r.dirty(),Hr(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})},"handleAsync")();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?O:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new at({in:e,out:r,typeName:x.ZodPipeline})}};i(at,"ZodPipeline");var Jr=i((t,e={},r)=>t?Le.create().superRefine((n,s)=>{var a,o;if(!t(n)){let c=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,d=(o=(a=c.fatal)!==null&&a!==void 0?a:r)!==null&&o!==void 0?o:!0,f=typeof c=="string"?{message:c}:c;s.addIssue({code:"custom",...f,fatal:d})}}):Le.create(),"custom"),Zs={object:V.lazycreate},x;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(x||(x={}));var Gs=i((t,e={message:`Input not instance of ${t.name}`})=>Jr(r=>r instanceof t,e),"instanceOfType"),Xr=he.create,qr=Oe.create,Fs=pt.create,Ks=Ae.create,en=He.create,Ws=je.create,Ys=ut.create,Hs=Qe.create,Qs=Je.create,Js=Le.create,Xs=Re.create,qs=Ee.create,ea=lt.create,ta=me.create,ra=V.create,na=V.strictCreate,sa=Xe.create,aa=dt.create,ia=qe.create,oa=be.create,ca=et.create,ua=ft.create,la=Pe.create,da=Ve.create,fa=tt.create,ha=rt.create,pa=Ne.create,ma=nt.create,ga=ze.create,Wr=ge.create,ya=Te.create,va=De.create,_a=ge.createWithPreprocess,ba=at.create,wa=i(()=>Xr().optional(),"ostring"),ka=i(()=>qr().optional(),"onumber"),Ea=i(()=>en().optional(),"oboolean"),Ta={string:t=>he.create({...t,coerce:!0}),number:t=>Oe.create({...t,coerce:!0}),boolean:t=>He.create({...t,coerce:!0}),bigint:t=>Ae.create({...t,coerce:!0}),date:t=>je.create({...t,coerce:!0})},Sa=O,ye=Object.freeze({__proto__:null,defaultErrorMap:Bt,setErrorMap:Ns,getErrorMap:Gt,makeIssue:Ft,EMPTY_PATH:Cs,addIssueToContext:_,ParseStatus:X,INVALID:O,DIRTY:Hr,OK:le,isAborted:cr,isDirty:ur,isValid:Kt,isAsync:Wt,get util(){return R},get objectUtil(){return or},ZodParsedType:g,getParsedType:Ye,ZodType:A,ZodString:he,ZodNumber:Oe,ZodBigInt:Ae,ZodBoolean:He,ZodDate:je,ZodSymbol:ut,ZodUndefined:Qe,ZodNull:Je,ZodAny:Le,ZodUnknown:Re,ZodNever:Ee,ZodVoid:lt,ZodArray:me,ZodObject:V,ZodUnion:Xe,ZodDiscriminatedUnion:dt,ZodIntersection:qe,ZodTuple:be,ZodRecord:et,ZodMap:ft,ZodSet:Pe,ZodFunction:Ve,ZodLazy:tt,ZodLiteral:rt,ZodEnum:Ne,ZodNativeEnum:nt,ZodPromise:ze,ZodEffects:ge,ZodTransformer:ge,ZodOptional:Te,ZodNullable:De,ZodDefault:st,ZodCatch:ht,ZodNaN:pt,BRAND:zs,ZodBranded:Dt,ZodPipeline:at,custom:Jr,Schema:A,ZodSchema:A,late:Zs,get ZodFirstPartyTypeKind(){return x},coerce:Ta,any:Js,array:ta,bigint:Ks,boolean:en,date:Ws,discriminatedUnion:aa,effect:Wr,enum:pa,function:da,instanceof:Gs,intersection:ia,lazy:fa,literal:ha,map:ua,nan:Fs,nativeEnum:ma,never:qs,null:Qs,nullable:va,number:qr,object:ra,oboolean:Ea,onumber:ka,optional:ya,ostring:wa,pipeline:ba,preprocess:_a,promise:ga,record:ca,set:la,strictObject:na,string:Xr,symbol:Ys,transformer:Wr,tuple:oa,undefined:Hs,union:sa,unknown:Xs,void:ea,NEVER:Sa,ZodIssueCode:h,quotelessJson:As,ZodError:pe});function tn(t){let e=t.runtimeEnvStrict??t.runtimeEnv??process.env;if(t.skipValidation)return e;let r=typeof t.client=="object"?t.client:{},n=typeof t.server=="object"?t.server:{},s=typeof t.shared=="object"?t.shared:{},a=ye.object(r),o=ye.object(n),c=ye.object(s),d=t.isServer??typeof window>"u",f=a.merge(c),y=o.merge(c).merge(a),T=d?y.safeParse(e):f.safeParse(e),S=t.onValidationError??(K=>{throw console.error("\u274C Invalid environment variables:",K.flatten().fieldErrors),new Error("Invalid environment variables")}),H=t.onInvalidAccess??(K=>{throw new Error("\u274C Attempted to access a server-side environment variable on the client")});return T.success===!1?S(T.error):new Proxy(T.data,{get(K,E){if(typeof E=="string")return!d&&t.clientPrefix&&!E.startsWith(t.clientPrefix)&&c.shape[E]===void 0?H(E):K[E]}})}i(tn,"h");var cn=We(on());cn.config();var mt=tn({server:{SCRAPER_API_JOBS_URL:ye.string().url(),SCRAPER_API_KEY:ye.string().min(1),DATABASE_URL:ye.string().min(1),PG_DATABASE_HOST:ye.string().min(1),PG_DATABASE_PORT:ye.string().min(1),PG_DATABASE_USER:ye.string().min(1),PG_DATABASE_PASS:ye.string().min(1),PG_DATABASE_NAME:ye.string().min(1),PG_SSL_MODE:ye.enum(["disable","require"])},runtimeEnv:process.env});var xn=We(require("os"),1),On=We(require("fs"),1);var Yt=new Map,pr=new Map,mr=Symbol("OriginError"),Tt={},de=class extends Promise{constructor(e,r,n,s,a={}){let o,c;super((d,f)=>{o=d,c=f}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=r,this.handler=n,this.canceller=s,this.options=a,this.state=null,this.statement=null,this.resolve=d=>(this.active=!1,o(d)),this.reject=d=>(this.active=!1,c(d)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[mr]=this.handler.debug?new Error:this.tagged&&za(this.strings)}get origin(){return this.handler.debug?this[mr].stack:this.tagged?pr.has(this.strings)?pr.get(this.strings):pr.set(this.strings,this[mr].stack).get(this.strings):""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,r){if(this.options.simple=!1,typeof e=="function"&&(r=e,e=1),this.cursorRows=e,typeof r=="function")return this.cursorFn=r,this;let n;return{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};n&&n();let s=new Promise((a,o)=>{this.cursorFn=c=>(a({value:c,done:!1}),new Promise(d=>n=d)),this.resolve=()=>(this.active=!1,a({done:!0})),this.reject=c=>(this.active=!1,o(c))});return this.execute(),s},return(){return n&&n(Tt),{done:!0}}})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw new Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}};i(de,"Query");function za(t){if(Yt.has(t))return Yt.get(t);let e=Error.stackTraceLimit;return Error.stackTraceLimit=4,Yt.set(t,new Error),Error.stackTraceLimit=e,Yt.get(t)}i(za,"cachedError");var it=class extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}};i(it,"PostgresError");var q={connection:un,postgres:ln,generic:dn,notSupported:fn};function un(t,e,r){let{host:n,port:s}=r||e,a=Object.assign(new Error("write "+t+" "+(e.path||n+":"+s)),{code:t,errno:t,address:e.path||n},e.path?{}:{port:s});return Error.captureStackTrace(a,un),a}i(un,"connection");function ln(t){let e=new it(t);return Error.captureStackTrace(e,ln),e}i(ln,"postgres");function dn(t,e){let r=Object.assign(new Error(t+": "+e),{code:t});return Error.captureStackTrace(r,dn),r}i(dn,"generic");function fn(t){let e=Object.assign(new Error(t+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:t});return Error.captureStackTrace(e,fn),e}i(fn,"notSupported");var Za={string:{to:25,from:null,serialize:t=>""+t},number:{to:0,from:[21,23,26,700,701],serialize:t=>""+t,parse:t=>+t},json:{to:114,from:[114,3802],serialize:t=>JSON.stringify(t),parse:t=>JSON.parse(t)},boolean:{to:16,from:16,serialize:t=>t===!0?"t":"f",parse:t=>t==="t"},date:{to:1184,from:[1082,1114,1184],serialize:t=>(t instanceof Date?t:new Date(t)).toISOString(),parse:t=>new Date(t)},bytea:{to:17,from:17,serialize:t=>"\\x"+Buffer.from(t).toString("hex"),parse:t=>Buffer.from(t.slice(2),"hex")}},St=class{then(){yr()}catch(){yr()}finally(){yr()}};i(St,"NotTagged");var gt=class extends St{constructor(e){super(),this.value=Jt(e)}};i(gt,"Identifier");var Se=class extends St{constructor(e,r,n){super(),this.value=e,this.type=r,this.array=n}};i(Se,"Parameter");var xt=class extends St{constructor(e,r){super(),this.first=e,this.rest=r}build(e,r,n,s){let a=Ga.map(([o,c])=>({fn:c,i:e.search(o)})).sort((o,c)=>o.i-c.i).pop();return a.i===-1?kr(this.first,s):a.fn(this.first,this.rest,r,n,s)}};i(xt,"Builder");function Qt(t,e,r,n){let s=t instanceof Se?t.value:t;if(s===void 0&&(t instanceof Se?t.value=n.transform.undefined:s=t=n.transform.undefined,s===void 0))throw q.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+r.push(t instanceof Se?(e.push(t.value),t.array?t.array[t.type||Ht(t.value)]||t.type||gn(t.value):t.type):(e.push(t),Ht(t)))}i(Qt,"handleValue");var pn=vn(Za);function br(t,e,r,n,s,a){for(let o=1;o<t.strings.length;o++)e+=wr(e,r,n,s,a)+t.strings[o],r=t.args[o];return e}i(br,"stringify");function wr(t,e,r,n,s){return e instanceof xt?e.build(t,r,n,s):e instanceof de?_r(e,r,n,s):e instanceof gt?e.value:e&&e[0]instanceof de?e.reduce((a,o)=>a+" "+_r(o,r,n,s),""):Qt(e,r,n,s)}i(wr,"stringifyValue");function _r(t,e,r,n){return t.fragment=!0,br(t,t.strings[0],t.args[0],e,r,n)}i(_r,"fragment");function mn(t,e,r,n,s){return t.map(a=>"("+n.map(o=>wr("values",a[o],e,r,s)).join(",")+")").join(",")}i(mn,"valuesBuilder");function hn(t,e,r,n,s){let a=Array.isArray(t[0]),o=e.length?e.flat():Object.keys(a?t[0]:t);return mn(a?t:[t],r,n,o,s)}i(hn,"values");function gr(t,e,r,n,s){if(typeof t=="string"&&(t=[t].concat(e)),Array.isArray(t))return kr(t,s);let a;return(e.length?e.flat():Object.keys(t)).map(c=>(a=t[c],(a instanceof de?_r(a,r,n,s):a instanceof gt?a.value:Qt(a,r,n,s))+" as "+Jt(s.transform.column.to?s.transform.column.to(c):c))).join(",")}i(gr,"select");var Ga=Object.entries({values:hn,in:(...t)=>{let e=hn(...t);return e==="()"?"(null)":e},select:gr,as:gr,returning:gr,update(t,e,r,n,s){return(e.length?e.flat():Object.keys(t)).map(a=>Jt(s.transform.column.to?s.transform.column.to(a):a)+"="+wr("values",t[a],r,n,s))},insert(t,e,r,n,s){let a=e.length?e.flat():Object.keys(Array.isArray(t)?t[0]:t);return"("+kr(a,s)+")values"+mn(Array.isArray(t)?t:[t],r,n,a,s)}}).map(([t,e])=>[new RegExp("((?:^|[\\s(])"+t+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),e]);function yr(){throw q.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}i(yr,"notTagged");var Fa=pn.serializers,Ka=pn.parsers;function gn(t){return Array.isArray(t)?gn(t[0]):typeof t=="string"?1009:0}i(gn,"firstIsString");var yn=i(function(t){let e=vn(t||{});return{serializers:Object.assign({},Fa,e.serializers),parsers:Object.assign({},Ka,e.parsers)}},"mergeUserTypes");function vn(t){return Object.keys(t).reduce((e,r)=>(t[r].from&&[].concat(t[r].from).forEach(n=>e.parsers[n]=t[r].parse),e.serializers[t[r].to]=t[r].serialize,t[r].from&&[].concat(t[r].from).forEach(n=>e.serializers[n]=t[r].serialize),e),{parsers:{},serializers:{}})}i(vn,"typeHandlers");function kr(t,{transform:{column:e}}){return t.map(r=>Jt(e.to?e.to(r):r)).join(",")}i(kr,"escapeIdentifiers");var Jt=i(function(e){return'"'+e.replace(/"/g,'""').replace(/\./g,'"."')+'"'},"escape"),Ht=i(function t(e){return e instanceof Se?e.type:e instanceof Date?1184:e instanceof Uint8Array?17:e===!0||e===!1?16:typeof e=="bigint"?20:Array.isArray(e)?t(e[0]):0},"inferType"),Wa=/\\/g,Ya=/"/g;function Ha(t){return t.replace(Wa,"\\\\").replace(Ya,'\\"')}i(Ha,"arrayEscape");var _n=i(function t(e,r,n,s){if(Array.isArray(e)===!1)return e;if(!e.length)return"{}";let a=e[0],o=s===1020?";":",";return Array.isArray(a)&&!a.type?"{"+e.map(c=>t(c,r,n,s)).join(o)+"}":"{"+e.map(c=>{if(c===void 0&&(c=n.transform.undefined,c===void 0))throw q.generic("UNDEFINED_VALUE","Undefined values are not allowed");return c===null?"null":'"'+Ha(r?r(c.type?c.value:c):""+c)+'"'}).join(o)+"}"},"arraySerializer"),vr={i:0,char:null,str:"",quoted:!1,last:0},bn=i(function(e,r,n){return vr.i=vr.last=0,wn(vr,e,r,n)},"arrayParser");function wn(t,e,r,n){let s=[],a=n===1020?";":",";for(;t.i<e.length;t.i++){if(t.char=e[t.i],t.quoted)t.char==="\\"?t.str+=e[++t.i]:t.char==='"'?(s.push(r?r(t.str):t.str),t.str="",t.quoted=e[t.i+1]==='"',t.last=t.i+2):t.str+=t.char;else if(t.char==='"')t.quoted=!0;else if(t.char==="{")t.last=++t.i,s.push(wn(t,e,r,n));else if(t.char==="}"){t.quoted=!1,t.last<t.i&&s.push(r?r(e.slice(t.last,t.i)):e.slice(t.last,t.i)),t.last=t.i+1;break}else t.char===a&&t.p!=="}"&&t.p!=='"'&&(s.push(r?r(e.slice(t.last,t.i)):e.slice(t.last,t.i)),t.last=t.i+1);t.p=t.char}return t.last<t.i&&s.push(r?r(e.slice(t.last,t.i+1)):e.slice(t.last,t.i+1)),s}i(wn,"arrayParserLoop");var yt=i(t=>{let e=t[0];for(let r=1;r<t.length;r++)e+=t[r]==="_"?t[++r].toUpperCase():t[r];return e},"toCamel"),vt=i(t=>{let e=t[0].toUpperCase();for(let r=1;r<t.length;r++)e+=t[r]==="_"?t[++r].toUpperCase():t[r];return e},"toPascal"),_t=i(t=>t.replace(/_/g,"-"),"toKebab"),Mt=i(t=>t.replace(/([A-Z])/g,"_$1").toLowerCase(),"fromCamel"),Ut=i(t=>(t.slice(0,1)+t.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),"fromPascal"),$t=i(t=>t.replace(/-/g,"_"),"fromKebab");function Er(t){return i(function e(r,n){return typeof r=="object"&&r!==null&&(n.type===114||n.type===3802)?Array.isArray(r)?r.map(s=>e(s,n)):Object.entries(r).reduce((s,[a,o])=>Object.assign(s,{[t(a)]:e(o,n)}),{}):r},"jsonTransform")}i(Er,"createJsonTransform");yt.column={from:yt};yt.value={from:Er(yt)};Mt.column={to:Mt};var Tr={...yt};Tr.column.to=Mt;vt.column={from:vt};vt.value={from:Er(vt)};Ut.column={to:Ut};var Sr={...vt};Sr.column.to=Ut;_t.column={from:_t};_t.value={from:Er(_t)};$t.column={to:$t};var xr={..._t};xr.column.to=$t;var Nr=We(require("net"),1),Tn=We(require("tls"),1),At=We(require("crypto"),1),er=We(require("stream"),1);var Ge=class extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}};i(Ge,"Result");var xe=Qa;function Qa(t=[]){let e=t.slice(),r=0;return{get length(){return e.length-r},remove:n=>{let s=e.indexOf(n);return s===-1?null:(e.splice(s,1),n)},push:n=>(e.push(n),n),shift:()=>{let n=e[r++];return r===e.length?(r=0,e=[]):e[r-1]=void 0,n}}}i(Qa,"Queue");var ie=Buffer.allocUnsafe(256),Ja="BCcDdEFfHPpQSX".split("").reduce((t,e)=>{let r=e.charCodeAt(0);return t[e]=()=>(ie[0]=r,M.i=5,M),t},{}),M=Object.assign(Xa,Ja,{N:String.fromCharCode(0),i:0,inc(t){return M.i+=t,M},str(t){let e=Buffer.byteLength(t);return Xt(e),M.i+=ie.write(t,M.i,e,"utf8"),M},i16(t){return Xt(2),ie.writeUInt16BE(t,M.i),M.i+=2,M},i32(t,e){return e||e===0?(ie.writeUInt32BE(t,e),M):(Xt(4),ie.writeUInt32BE(t,M.i),M.i+=4,M)},z(t){return Xt(t),ie.fill(0,M.i,M.i+t),M.i+=t,M},raw(t){return ie=Buffer.concat([ie.subarray(0,M.i),t]),M.i=ie.length,M},end(t=1){ie.writeUInt32BE(M.i-t,t);let e=ie.subarray(0,M.i);return M.i=0,ie=Buffer.allocUnsafe(256),e}}),b=M;function Xt(t){if(ie.length-M.i<t){let e=ie,r=e.length;ie=Buffer.allocUnsafe(r+(r>>1)+t),e.copy(ie)}}i(Xt,"fit");function Xa(){return M.i=0,M}i(Xa,"reset");var Cr=Sn,qa=1,ot=b().S().end(),kn=b().H().end(),ei=b().i32(8).i32(80877103).end(8),ti=Buffer.concat([b().E().str(b.N).i32(0).end(),ot]),ri=b().D().str("S").str(b.N).end(),Ot=i(()=>{},"noop"),ni=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),si={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function Sn(t,e={},{onopen:r=Ot,onend:n=Ot,onclose:s=Ot}={}){let{ssl:a,max:o,user:c,host:d,port:f,database:y,parsers:T,transform:S,onnotice:H,onnotify:K,onparameter:E,max_pipeline:oe,keep_alive:U,backoff:fe,target_session_attrs:Ce}=t,D=xe(),Be=qa++,Me={pid:null,secret:null},bt=Ar(ar,t.idle_timeout),ct=Ar(ar,t.max_lifetime),B=Ar(Pn,t.connect_timeout),v=null,Ue,j=new Ge,se=Buffer.alloc(0),Nt=t.fetch_types,$e={},Fe={},p=Math.random().toString(36).slice(2),I=1,z=0,Q=0,ae=0,J=0,$=0,C=0,Z=0,L=null,G=null,te=!1,we=null,Ke=null,ke=null,W=null,F=null,ve=null,Lt=null,nr=null,m=null,Ct=null,ce={queue:e.closed,idleTimer:bt,connect(u){ke=u,$r()},terminate:jt,execute:It,cancel:Cn,end:ar,count:0,id:Be};return e.closed&&e.closed.push(ce),ce;async function Nn(){let u;try{u=t.socket?await Promise.resolve(t.socket(t)):Nr.default.Socket()}catch(l){kt(l);return}return u.on("error",kt),u.on("close",Lr),u.on("drain",Mr),u}i(Nn,"createSocket");async function Cn({pid:u,secret:l},w,P){try{Ue=b().i32(16).i32(80877102).i32(u).i32(l).end(16),await Ur(),v.once("error",P),v.once("close",w)}catch(Y){P(Y)}}i(Cn,"cancel");function It(u){if(te)return zt(u,q.connection("CONNECTION_DESTROYED",t));if(!u.cancelled)try{return u.state=Me,m?D.push(u):(m=u,m.active=!0),Rn(u),re(In(u))&&!u.describeFirst&&!u.cursorFn&&D.length<oe&&(!u.options.onexecute||u.options.onexecute(ce))}catch(l){return D.length===0&&re(ot),Ie(l),!0}}i(It,"execute");function In(u){if(u.parameters.length>=65534)throw q.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return u.options.simple?b().Q().str(u.statement.string+b.N).end():u.describeFirst?Buffer.concat([Pr(u),kn]):u.prepare?u.prepared?Vt(u):Buffer.concat([Pr(u),Vt(u)]):jn(u)}i(In,"toBuffer");function Pr(u){return Buffer.concat([zr(u.statement.string,u.parameters,u.statement.types,u.statement.name),vs("S",u.statement.name)])}i(Pr,"describe");function Vt(u){return Buffer.concat([ys(u.parameters,u.statement.types,u.statement.name,u.cursorName),u.cursorFn?Zr("",u.cursorRows):ti])}i(Vt,"prepared");function jn(u){return Buffer.concat([zr(u.statement.string,u.parameters,u.statement.types),ri,Vt(u)])}i(jn,"unnamed");function Rn(u){let l=[],w=[],P=br(u,u.strings[0],u.args[0],l,w,t);!u.tagged&&u.args.forEach(Y=>Qt(Y,l,w,t)),u.prepare=t.prepare&&("prepare"in u.options?u.options.prepare:!0),u.string=P,u.signature=u.prepare&&w+P,u.onlyDescribe&&delete Fe[u.signature],u.parameters=u.parameters||l,u.prepared=u.prepare&&u.signature in Fe,u.describeFirst=u.onlyDescribe||l.length&&!u.prepared,u.statement=u.prepared?Fe[u.signature]:{string:P,types:w,name:u.prepare?p+I++:""},typeof t.debug=="function"&&t.debug(Be,P,l,w)}i(Rn,"build");function re(u,l){return ve=ve?Buffer.concat([ve,u]):Buffer.from(u),l||ve.length>=1024?Dr(l):(G===null&&(G=setImmediate(Dr)),!0)}i(re,"write");function Dr(u){let l=v.write(ve,u);return G!==null&&clearImmediate(G),ve=G=null,l}i(Dr,"nextWrite");function Pn(){Ie(q.connection("CONNECT_TIMEOUT",t,v)),v.destroy()}i(Pn,"connectTimedOut");async function Br(){if(re(ei),!await new Promise(l=>v.once("data",w=>l(w[0]===83)))&&a==="prefer")return wt();v.removeAllListeners(),v=Tn.default.connect({socket:v,servername:Nr.default.isIP(v.host)?void 0:v.host,...a==="require"||a==="allow"||a==="prefer"?{rejectUnauthorized:!1}:a==="verify-full"?{}:typeof a=="object"?a:{}}),v.on("secureConnect",wt),v.on("error",kt),v.on("close",Lr),v.on("drain",Mr)}i(Br,"secure");function Mr(){!m&&r(ce)}i(Mr,"drain");function sr(u){if(!(we&&(we.push(u),Q-=u.length,Q>=0)))for(se=we?Buffer.concat(we,$-Q):se.length===0?u:Buffer.concat([se,u],se.length+u.length);se.length>4;){if($=se.readUInt32BE(1),$>=se.length){Q=$-se.length,we=[se];break}try{Dn(se.subarray(0,$+1))}catch(l){m&&(m.cursorFn||m.describeFirst)&&re(ot),Ie(l)}se=se.subarray($+1),Q=0,we=null}}i(sr,"data");async function Ur(){if(te=!1,$e={},v||(v=await Nn()),!!v){if(B.start(),t.socket)return a?Br():wt();if(v.on("connect",a?Br:wt),t.path)return v.connect(t.path);v.connect(f[ae],d[ae]),v.host=d[ae],v.port=f[ae],ae=(ae+1)%f.length}}i(Ur,"connect");function $r(){setTimeout(Ur,z?z+C-Number(process.hrtime.bigint()/1000000n):0)}i($r,"reconnect");function wt(){try{Fe={},Nt=t.fetch_types,p=Math.random().toString(36).slice(2),I=1,ct.start(),v.on("data",sr),U&&v.setKeepAlive&&v.setKeepAlive(!0,1e3*U);let u=bs();re(u)}catch(u){kt(u)}}i(wt,"connected");function kt(u){if(!(ce.queue===e.connecting&&t.host[J+1]))for(Ie(u);D.length;)zt(D.shift(),u)}i(kt,"error");function Ie(u){F&&(F.destroy(u),F=null),m&&zt(m,u),ke&&(zt(ke,u),ke=null)}i(Ie,"errored");function zt(u,l){u.reject(Object.create(l,{stack:{value:l.stack+u.origin.replace(/.*\n/,`
`),enumerable:t.debug},query:{value:u.string,enumerable:t.debug},parameters:{value:u.parameters,enumerable:t.debug},args:{value:u.args,enumerable:t.debug},types:{value:u.statement&&u.statement.types,enumerable:t.debug}}))}i(zt,"queryError");function ar(){return W||(!ce.reserved&&n(ce),!ce.reserved&&!ke&&!m&&D.length===0?(jt(),new Promise(u=>v&&v.readyState!=="closed"?v.once("close",u):u())):W=new Promise(u=>Lt=u))}i(ar,"end");function jt(){te=!0,(F||m||ke||D.length)&&kt(q.connection("CONNECTION_DESTROYED",t)),clearImmediate(G),v&&(v.removeListener("data",sr),v.removeListener("connect",wt),v.readyState==="open"&&v.end(b().X().end())),Lt&&(Lt(),W=Lt=null)}i(jt,"terminate");async function Lr(u){if(se=Buffer.alloc(0),Q=0,we=null,clearImmediate(G),v.removeListener("data",sr),v.removeListener("connect",wt),bt.cancel(),ct.cancel(),B.cancel(),v.encrypted&&(v.removeAllListeners(),v=null),ke)return $r();!u&&(m||D.length)&&kt(q.connection("CONNECTION_CLOSED",t,v)),z=Number(process.hrtime.bigint()/1000000n),u&&t.shared.retries++,C=(typeof fe=="function"?fe(t.shared.retries):fe)*1e3,s(ce)}i(Lr,"closed");function Dn(u,l=u[0]){(l===68?Bn:l===100?us:l===65?ns:l===83?Mn:l===90?Un:l===67?$n:l===50?Vr:l===49?Ln:l===116?Vn:l===84?zn:l===82?Zn:l===110?Hn:l===75?Qn:l===69?ts:l===115?ss:l===51?as:l===71?is:l===78?ds:l===72?os:l===99?ls:l===73?fs:l===86?hs:l===118?ps:l===87?cs:ms)(u)}i(Dn,"handle");function Bn(u){let l=7,w,P,Y,ne=m.isRaw?new Array(m.statement.columns.length):{};for(let ue=0;ue<m.statement.columns.length;ue++)P=m.statement.columns[ue],w=u.readInt32BE(l),l+=4,Y=w===-1?null:m.isRaw===!0?u.subarray(l,l+=w):P.parser===void 0?u.toString("utf8",l,l+=w):P.parser.array===!0?P.parser(u.toString("utf8",l+1,l+=w)):P.parser(u.toString("utf8",l,l+=w)),m.isRaw?ne[ue]=m.isRaw===!0?Y:S.value.from?S.value.from(Y,P):Y:ne[P.name]=S.value.from?S.value.from(Y,P):Y;m.forEachFn?m.forEachFn(S.row.from?S.row.from(ne):ne,j):j[Z++]=S.row.from?S.row.from(ne):ne}i(Bn,"DataRow");function Mn(u){let[l,w]=u.toString("utf8",5,u.length-1).split(b.N);$e[l]=w,t.parameters[l]!==w&&(t.parameters[l]=w,E&&E(l,w))}i(Mn,"ParameterStatus");function Un(u){if(m&&m.options.simple&&m.resolve(Ke||j),m=Ke=null,j=new Ge,B.cancel(),ke){if(Ce){if(!$e.in_hot_standby||!$e.default_transaction_read_only)return es();if(qn(Ce,$e))return jt()}if(Nt)return Jn();It(ke),t.shared.retries=J=ke=0;return}for(;D.length&&(m=D.shift())&&(m.active=!0,m.cancelled);)Sn(t).cancel(m.state,m.cancelled.resolve,m.cancelled.reject);m||(ce.reserved?u[5]===73?W?jt():(ce.reserved=null,r(ce)):ce.reserved():W?jt():r(ce))}i(Un,"ReadyForQuery");function $n(u){Z=0;for(let l=u.length-1;l>0;l--)if(u[l]===32&&u[l+1]<58&&j.count===null&&(j.count=+u.toString("utf8",l+1,u.length-1)),u[l-1]>=65){j.command=u.toString("utf8",5,l),j.state=Me;break}if(Ct&&(Ct(),Ct=null),j.command==="BEGIN"&&o!==1&&!ce.reserved)return Ie(q.generic("UNSAFE_TRANSACTION","Only use sql.begin or max: 1"));if(m.options.simple)return Vr();m.cursorFn&&(j.count&&m.cursorFn(j),re(ot)),m.resolve(j)}i($n,"CommandComplete");function Ln(){m.parsing=!1}i(Ln,"ParseComplete");function Vr(){!j.statement&&(j.statement=m.statement),j.columns=m.statement.columns}i(Vr,"BindComplete");function Vn(u){let l=u.readUInt16BE(5);for(let w=0;w<l;++w)!m.statement.types[w]&&(m.statement.types[w]=u.readUInt32BE(7+w*4));m.prepare&&(Fe[m.signature]=m.statement),m.describeFirst&&!m.onlyDescribe&&(re(Vt(m)),m.describeFirst=!1)}i(Vn,"ParameterDescription");function zn(u){j.command&&(Ke=Ke||[j],Ke.push(j=new Ge),j.count=null,m.statement.columns=null);let l=u.readUInt16BE(5),w=7,P;m.statement.columns=Array(l);for(let Y=0;Y<l;++Y){for(P=w;u[w++]!==0;);let ne=u.readUInt32BE(w),ue=u.readUInt16BE(w+4),Rt=u.readUInt32BE(w+6);m.statement.columns[Y]={name:S.column.from?S.column.from(u.toString("utf8",P,w-1)):u.toString("utf8",P,w-1),parser:T[Rt],table:ne,number:ue,type:Rt},w+=18}if(j.statement=m.statement,m.onlyDescribe)return m.resolve(m.statement),re(ot)}i(zn,"RowDescription");async function Zn(u,l=u.readUInt32BE(5)){(l===3?Gn:l===5?Fn:l===10?Kn:l===11?Wn:l===12?Yn:l!==0?gs:Ot)(u,l)}i(Zn,"Authentication");async function Gn(){re(b().p().str(await ir()).z(1).end())}i(Gn,"AuthenticationCleartextPassword");async function Fn(u){re(b().p().str("md5"+En(Buffer.concat([Buffer.from(En(await ir()+c)),u.subarray(9)]))).z(1).end())}i(Fn,"AuthenticationMD5Password");function Kn(){b().p().str("SCRAM-SHA-256"+b.N);let u=b.i;nr=At.default.randomBytes(18).toString("base64"),re(b.inc(4).str("n,,n=*,r="+nr).i32(b.i-u-4,u).end())}i(Kn,"SASL");async function Wn(u){let l=u.toString("utf8",9).split(",").reduce((ne,ue)=>(ne[ue[0]]=ue.slice(2),ne),{}),w=At.default.pbkdf2Sync(await ir(),Buffer.from(l.s,"base64"),parseInt(l.i),32,"sha256"),P=qt(w,"Client Key"),Y="n=*,r="+nr+",r="+l.r+",s="+l.s+",i="+l.i+",c=biws,r="+l.r;L=qt(qt(w,"Server Key"),Y).toString("base64"),re(b().p().str("c=biws,r="+l.r+",p="+ii(P,qt(ai(P),Y)).toString("base64")).end())}i(Wn,"SASLContinue");function Yn(u){u.toString("utf8",9).split(b.N,1)[0].slice(2)!==L&&(Ie(q.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),v.destroy())}i(Yn,"SASLFinal");function ir(){return Promise.resolve(typeof t.pass=="function"?t.pass():t.pass)}i(ir,"Pass");function Hn(){if(j.statement=m.statement,j.statement.columns=[],m.onlyDescribe)return m.resolve(m.statement),re(ot)}i(Hn,"NoData");function Qn(u){Me.pid=u.readUInt32BE(5),Me.secret=u.readUInt32BE(9)}i(Qn,"BackendKeyData");async function Jn(){Nt=!1,(await new de([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],It)).forEach(({oid:l,typarray:w})=>Xn(l,w))}i(Jn,"fetchArrayTypes");function Xn(u,l){if(!!t.parsers[l]&&!!t.serializers[l])return;let w=t.parsers[u];t.shared.typeArrayMap[u]=l,t.parsers[l]=P=>bn(P,w,l),t.parsers[l].array=!0,t.serializers[l]=P=>_n(P,t.serializers[u],t,l)}i(Xn,"addArrayType");function qn(u,l){return u==="read-write"&&l.default_transaction_read_only==="on"||u==="read-only"&&l.default_transaction_read_only==="off"||u==="primary"&&l.in_hot_standby==="on"||u==="standby"&&l.in_hot_standby==="off"||u==="prefer-standby"&&l.in_hot_standby==="off"&&t.host[J]}i(qn,"tryNext");function es(){let u=new de([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],It,null,{simple:!0});u.resolve=([[l],[w]])=>{$e.default_transaction_read_only=l.transaction_read_only,$e.in_hot_standby=w.pg_is_in_recovery?"on":"off"},u.execute()}i(es,"fetchState");function ts(u){m&&(m.cursorFn||m.describeFirst)&&re(ot);let l=q.postgres(Or(u));m&&m.retried?Ie(m.retried):m&&ni.has(l.routine)?rs(m,l):Ie(l)}i(ts,"ErrorResponse");function rs(u,l){delete Fe[u.signature],u.retried=l,It(u)}i(rs,"retry");function ns(u){if(!K)return;let l=9;for(;u[l++]!==0;);K(u.toString("utf8",9,l-1),u.toString("utf8",l,u.length-1))}i(ns,"NotificationResponse");async function ss(){try{let u=await Promise.resolve(m.cursorFn(j));Z=0,u===Tt?re(_s(m.portal)):(j=new Ge,re(Zr("",m.cursorRows)))}catch(u){re(ot),m.reject(u)}}i(ss,"PortalSuspended");function as(){j.count&&m.cursorFn(j),m.resolve(j)}i(as,"CloseComplete");function is(){F=new er.default.Writable({autoDestroy:!0,write(u,l,w){v.write(b().d().raw(u).end(),w)},destroy(u,l){l(u),v.write(b().f().str(u+b.N).end()),F=null},final(u){v.write(b().c().end()),Ct=u}}),m.resolve(F)}i(is,"CopyInResponse");function os(){F=new er.default.Readable({read(){v.resume()}}),m.resolve(F)}i(os,"CopyOutResponse");function cs(){F=new er.default.Duplex({autoDestroy:!0,read(){v.resume()},write(u,l,w){v.write(b().d().raw(u).end(),w)},destroy(u,l){l(u),v.write(b().f().str(u+b.N).end()),F=null},final(u){v.write(b().c().end()),Ct=u}}),m.resolve(F)}i(cs,"CopyBothResponse");function us(u){F&&(F.push(u.subarray(5))||v.pause())}i(us,"CopyData");function ls(){F&&F.push(null),F=null}i(ls,"CopyDone");function ds(u){H?H(Or(u)):console.log(Or(u))}i(ds,"NoticeResponse");function fs(){}i(fs,"EmptyQueryResponse");function hs(){Ie(q.notSupported("FunctionCallResponse"))}i(hs,"FunctionCallResponse");function ps(){Ie(q.notSupported("NegotiateProtocolVersion"))}i(ps,"NegotiateProtocolVersion");function ms(u){console.error("Postgres.js : Unknown Message:",u[0])}i(ms,"UnknownMessage");function gs(u,l){console.error("Postgres.js : Unknown Auth:",l)}i(gs,"UnknownAuth");function ys(u,l,w="",P=""){let Y,ne;return b().B().str(P+b.N).str(w+b.N).i16(0).i16(u.length),u.forEach((ue,Rt)=>{if(ue===null)return b.i32(4294967295);ne=l[Rt],u[Rt]=ue=ne in t.serializers?t.serializers[ne](ue):""+ue,Y=b.i,b.inc(4).str(ue).i32(b.i-Y-4,Y)}),b.i16(0),b.end()}i(ys,"Bind");function zr(u,l,w,P=""){return b().P().str(P+b.N).str(u+b.N).i16(l.length),l.forEach((Y,ne)=>b.i32(w[ne]||0)),b.end()}i(zr,"Parse");function vs(u,l=""){return b().D().str(u).str(l+b.N).end()}i(vs,"Describe");function Zr(u="",l=0){return Buffer.concat([b().E().str(u+b.N).i32(l).end(),kn])}i(Zr,"Execute");function _s(u=""){return Buffer.concat([b().C().str("P").str(u+b.N).end(),b().S().end()])}i(_s,"Close");function bs(){return Ue||b().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:c,database:y,client_encoding:"UTF8"},t.connection)).filter(([,u])=>u).map(([u,l])=>u+b.N+l).join(b.N)).z(2).end(0)}i(bs,"StartupMessage")}i(Sn,"Connection");function Or(t){let e={},r=5;for(let n=5;n<t.length-1;n++)t[n]===0&&(e[si[t[r]]]=t.toString("utf8",r+1,n),r=n+1);return e}i(Or,"parseError");function En(t){return At.default.createHash("md5").update(t).digest("hex")}i(En,"md5");function qt(t,e){return At.default.createHmac("sha256",t).update(e).digest()}i(qt,"hmac");function ai(t){return At.default.createHash("sha256").update(t).digest()}i(ai,"sha256");function ii(t,e){let r=Math.max(t.length,e.length),n=Buffer.allocUnsafe(r);for(let s=0;s<r;s++)n[s]=t[s]^e[s];return n}i(ii,"xor");function Ar(t,e){if(e=typeof e=="function"?e():e,!e)return{cancel:Ot,start:Ot};let r;return{cancel(){r&&(clearTimeout(r),r=null)},start(){r&&clearTimeout(r),r=setTimeout(n,e*1e3,arguments)}};function n(s){t.apply(null,s),r=null}}i(Ar,"timer");var oi=i(()=>{},"noop");function Ir(t,e){let r=new Map,n="postgresjs_"+Math.random().toString(36).slice(2),s={},a,o,c=!1,d=T.sql=t({...e,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...e.connection,replication:"database"},onclose:async function(){c||(o=null,s.pid=s.secret=void 0,S(await H(d,n,e.publications)),r.forEach(E=>E.forEach(({onsubscribe:oe})=>oe())))},no_subscribe:!0}),f=d.end,y=d.close;return d.end=async()=>(c=!0,o&&await new Promise(E=>(o.once("close",E),o.end())),f()),d.close=async()=>(o&&await new Promise(E=>(o.once("close",E),o.end())),y()),T;async function T(E,oe,U=oi){E=li(E),a||(a=H(d,n,e.publications));let fe={fn:oe,onsubscribe:U},Ce=r.has(E)?r.get(E).add(fe):r.set(E,new Set([fe])).get(E),D=i(()=>{Ce.delete(fe),Ce.size===0&&r.delete(E)},"unsubscribe");return a.then(Be=>(S(Be),U(),{unsubscribe:D,state:s,sql:d}))}i(T,"subscribe");function S(E){o=E.stream,s.pid=E.state.pid,s.secret=E.state.secret}i(S,"connected");async function H(E,oe,U){if(!U)throw new Error("Missing publication names");let fe=await E.unsafe(`CREATE_REPLICATION_SLOT ${oe} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[Ce]=fe,D=await E.unsafe(`START_REPLICATION SLOT ${oe} LOGICAL ${Ce.consistent_point} (proto_version '1', publication_names '${U}')`).writable(),Be={lsn:Buffer.concat(Ce.consistent_point.split("/").map(B=>Buffer.from(("00000000"+B).slice(-8),"hex")))};return D.on("data",Me),D.on("error",E.close),D.on("close",E.close),{stream:D,state:fe.state};function Me(B){B[0]===119?ui(B.subarray(25),Be,E.options.parsers,bt,e.transform):B[0]===107&&B[17]&&ct()}i(Me,"data");function bt(B,v){let Ue=v.relation.schema+"."+v.relation.table;K("*",B,v),K("*:"+Ue,B,v),v.relation.keys.length&&K("*:"+Ue+"="+v.relation.keys.map(j=>B[j.name]),B,v),K(v.command,B,v),K(v.command+":"+Ue,B,v),v.relation.keys.length&&K(v.command+":"+Ue+"="+v.relation.keys.map(j=>B[j.name]),B,v)}i(bt,"handle");function ct(){let B=Buffer.alloc(34);B[0]="r".charCodeAt(0),B.fill(Be.lsn,1),B.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),D.write(B)}i(ct,"pong")}i(H,"init");function K(E,oe,U){r.has(E)&&r.get(E).forEach(({fn:fe})=>fe(oe,U,E))}i(K,"call")}i(Ir,"Subscribe");function ci(t){return new Date(Date.UTC(2e3,0,1)+Number(t/BigInt(1e3)))}i(ci,"Time");function ui(t,e,r,n,s){let a=i((o,[c,d])=>(o[c.charCodeAt(0)]=d,o),"char");Object.entries({R:o=>{let c=1,d=e[o.readUInt32BE(c)]={schema:o.toString("utf8",c+=4,c=o.indexOf(0,c))||"pg_catalog",table:o.toString("utf8",c+1,c=o.indexOf(0,c+1)),columns:Array(o.readUInt16BE(c+=2)),keys:[]};c+=2;let f=0,y;for(;c<o.length;)y=d.columns[f++]={key:o[c++],name:s.column.from?s.column.from(o.toString("utf8",c,c=o.indexOf(0,c))):o.toString("utf8",c,c=o.indexOf(0,c)),type:o.readUInt32BE(c+=1),parser:r[o.readUInt32BE(c)],atttypmod:o.readUInt32BE(c+=4)},y.key&&d.keys.push(y),c+=4},Y:()=>{},O:()=>{},B:o=>{e.date=ci(o.readBigInt64BE(9)),e.lsn=o.subarray(1,9)},I:o=>{let c=1,d=e[o.readUInt32BE(c)],{row:f}=tr(o,d.columns,c+=7,s);n(f,{command:"insert",relation:d})},D:o=>{let c=1,d=e[o.readUInt32BE(c)];c+=4;let f=o[c]===75;n(f||o[c]===79?tr(o,f?d.keys:d.columns,c+=3,s).row:null,{command:"delete",relation:d,key:f})},U:o=>{let c=1,d=e[o.readUInt32BE(c)];c+=4;let f=o[c]===75,y=f||o[c]===79?tr(o,f?d.keys:d.columns,c+=3,s):null;y&&(c=y.i);let{row:T}=tr(o,d.columns,c+3,s);n(T,{command:"update",relation:d,key:f,old:y&&y.row})},T:()=>{},C:()=>{}}).reduce(a,{})[t[0]](t)}i(ui,"parse");function tr(t,e,r,n){let s,a,o,c=n.raw?new Array(e.length):{};for(let d=0;d<e.length;d++)s=t[r++],a=e[d],o=s===110?null:s===117?void 0:a.parser===void 0?t.toString("utf8",r+4,r+=4+t.readUInt32BE(r)):a.parser.array===!0?a.parser(t.toString("utf8",r+5,r+=4+t.readUInt32BE(r))):a.parser(t.toString("utf8",r+4,r+=4+t.readUInt32BE(r))),n.raw?c[d]=n.raw===!0?o:n.value.from?n.value.from(o,a):o:c[a.name]=n.value.from?n.value.from(o,a):o;return{i:r,row:n.row.from?n.row.from(c):c}}i(tr,"tuples");function li(t){let e=t.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!e)throw new Error("Malformed subscribe pattern: "+t);let[,r,n,s]=e;return(r||"*")+(n?":"+(n.indexOf(".")===-1?"public."+n:n):"")+(s?"="+s:"")}i(li,"parseEvent");var jr=We(require("stream"),1);function Rr(t,e,r=393216){return new Promise(async(n,s)=>{await t.begin(async a=>{let o;!e&&([{oid:e}]=await a`select lo_creat(-1) as oid`);let[{fd:c}]=await a`select lo_open(${e}, ${r}) as fd`,d={writable:y,readable:f,close:()=>a`select lo_close(${c})`.then(o),tell:()=>a`select lo_tell64(${c})`,read:T=>a`select loread(${c}, ${T}) as data`,write:T=>a`select lowrite(${c}, ${T})`,truncate:T=>a`select lo_truncate64(${c}, ${T})`,seek:(T,S=0)=>a`select lo_lseek64(${c}, ${T}, ${S})`,size:()=>a`
          select
            lo_lseek64(${c}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return n(d),new Promise(async T=>o=T);async function f({highWaterMark:T=2048*8,start:S=0,end:H=1/0}={}){let K=H-S;return S&&await d.seek(S),new jr.default.Readable({highWaterMark:T,async read(E){let oe=E>K?E-K:E;K-=E;let[{data:U}]=await d.read(oe);this.push(U),U.length<E&&this.push(null)}})}i(f,"readable");async function y({highWaterMark:T=2048*8,start:S=0}={}){return S&&await d.seek(S),new jr.default.Writable({highWaterMark:T,write(H,K,E){d.write(H).then(()=>E(),E)}})}i(y,"writable")}).catch(s)})}i(Rr,"largeObject");Object.assign(rr,{PostgresError:it,toPascal:vt,pascal:Sr,toCamel:yt,camel:Tr,toKebab:_t,kebab:xr,fromPascal:Ut,fromCamel:Mt,fromKebab:$t,BigInt:{to:20,from:[20],parse:t=>BigInt(t),serialize:t=>t.toString()}});var An=rr;function rr(t,e){let r=di(t,e),n=r.no_subscribe||Ir(rr,{...r}),s=!1,a=xe(),o=xe(),c=xe(),d=xe(),f=xe(),y=xe(),T=xe(),S=xe(),H={connecting:o,reserved:c,closed:d,ended:f,open:y,busy:T,full:S},K=[...Array(r.max)].map(()=>Cr(r,H,{onopen:$e,onend:Nt,onclose:Fe})),E=oe(bt);return Object.assign(E,{get parameters(){return r.parameters},largeObject:Rr.bind(null,E),subscribe:n,CLOSE:Tt,END:Tt,PostgresError:it,options:r,listen:U,notify:fe,begin:Ce,close:Ue,end:v}),E;function oe(p,I){return p.debug=r.debug,Object.entries(r.types).reduce(($,[C,Z])=>($[C]=L=>new Se(L,Z.to),$),z),Object.assign(Q,{types:z,typed:z,unsafe:ae,array:Me,json:Be,file:J}),Q;function z($,C){return new Se($,C)}i(z,"typed");function Q($,...C){let Z=$&&Array.isArray($.raw)?new de($,C,p,B):typeof $=="string"&&!C.length?new gt(r.transform.column.to?r.transform.column.to($):$):new xt($,C);return I&&Z instanceof de&&Z.execute(),Z}i(Q,"sql");function ae($,C=[],Z={}){arguments.length===2&&!Array.isArray(C)&&(Z=C,C=[]);let L=new de([$],C,p,B,{prepare:!1,...Z,simple:"simple"in Z?Z.simple:C.length===0});return I&&L.execute(),L}i(ae,"unsafe");function J($,C=[],Z={}){arguments.length===2&&!Array.isArray(C)&&(Z=C,C=[]);let L=new de([],C,G=>{On.default.readFile($,"utf8",(te,we)=>{if(te)return G.reject(te);G.strings=[we],p(G)})},B,{...Z,simple:"simple"in Z?Z.simple:C.length===0});return I&&L.execute(),L}i(J,"file")}i(oe,"Sql");async function U(p,I,z){let Q={fn:I,onlisten:z},ae=U.sql||(U.sql=rr({...r,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(U.channels).forEach(([L,{listeners:G}])=>{delete U.channels[L],Promise.all(G.map(te=>U(L,te.fn,te.onlisten).catch(()=>{})))})},onnotify(L,G){L in U.channels&&U.channels[L].listeners.forEach(te=>te.fn(G))}})),J=U.channels||(U.channels={});if(p in J){J[p].listeners.push(Q);let L=await J[p].result;return Q.onlisten&&Q.onlisten(),{state:L.state,unlisten:Z}}J[p]={result:ae`listen ${ae.unsafe('"'+p.replace(/"/g,'""')+'"')}`,listeners:[Q]};let C=await J[p].result;return Q.onlisten&&Q.onlisten(),{state:C.state,unlisten:Z};async function Z(){if(p in J&&(J[p].listeners=J[p].listeners.filter(L=>L!==Q),!J[p].listeners.length))return delete J[p],ae`unlisten ${ae.unsafe('"'+p.replace(/"/g,'""')+'"')}`}i(Z,"unlisten")}i(U,"listen");async function fe(p,I){return await E`select pg_notify(${p}, ${""+I})`}i(fe,"notify");async function Ce(p,I){!I&&(I=p,p="");let z=xe(),Q=0,ae;try{return await E.unsafe("begin "+p.replace(/[^a-z ]/ig,""),[],{onexecute:$}).execute(),await J(ae,I)}catch(C){throw C}async function J(C,Z,L){let G=oe(ke);G.savepoint=Ke;let te,we;L&&await G`savepoint ${G(L)}`;try{if(we=await new Promise((W,F)=>{let ve=Z(G);Promise.resolve(Array.isArray(ve)?Promise.all(ve):ve).then(W,F)}),te)throw te}catch(W){throw await(L?G`rollback to ${G(L)}`:G`rollback`),W instanceof it&&W.code==="25P02"&&te||W}return!L&&await G`commit`,we;function Ke(W,F){return W&&Array.isArray(W.raw)?Ke(ve=>ve.apply(ve,arguments)):(arguments.length===1&&(F=W,W=null),J(C,F,"s"+Q+++(W?"_"+W:"")))}i(Ke,"savepoint");function ke(W){W.catch(F=>te||(te=F)),C.queue===S?z.push(W):C.execute(W)||D(C,S)}i(ke,"handler")}i(J,"scope");function $(C){ae=C,D(C,c),C.reserved=()=>z.length?C.execute(z.shift()):D(C,c)}i($,"onexecute")}i(Ce,"begin");function D(p,I){p.queue.remove(p),I.push(p),p.queue=I,I===y?p.idleTimer.start():p.idleTimer.cancel()}i(D,"move");function Be(p){return new Se(p,3802)}i(Be,"json");function Me(p,I){return Array.isArray(p)?new Se(p,I||(p.length?Ht(p)||25:0),r.shared.typeArrayMap):Me(Array.from(arguments))}i(Me,"array");function bt(p){if(s)return p.reject(q.connection("CONNECTION_ENDED",r,r));if(y.length)return ct(y.shift(),p);if(d.length)return se(d.shift(),p);T.length?ct(T.shift(),p):a.push(p)}i(bt,"handler");function ct(p,I){return p.execute(I)?D(p,T):D(p,S)}i(ct,"go");function B(p){return new Promise((I,z)=>{p.state?p.active?Cr(r).cancel(p.state,I,z):p.cancelled={resolve:I,reject:z}:(a.remove(p),p.cancelled=!0,p.reject(q.generic("57014","canceling statement due to user request")),I())})}i(B,"cancel");async function v({timeout:p=null}={}){if(s)return s;await 1;let I;return s=Promise.race([new Promise(z=>p!==null&&(I=setTimeout(j,p*1e3,z))),Promise.all(K.map(z=>z.end()).concat(U.sql?U.sql.end({timeout:0}):[],n.sql?n.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(I))}i(v,"end");async function Ue(){await Promise.all(K.map(p=>p.end()))}i(Ue,"close");async function j(p){for(await Promise.all(K.map(I=>I.terminate()));a.length;)a.shift().reject(q.connection("CONNECTION_DESTROYED",r));p()}i(j,"destroy");function se(p,I){D(p,o),p.connect(I)}i(se,"connect");function Nt(p){D(p,f)}i(Nt,"onend");function $e(p){if(a.length===0)return D(p,y);let I=Math.ceil(a.length/(o.length+1)),z=!0;for(;z&&a.length&&I-- >0;)z=p.execute(a.shift());z?D(p,T):D(p,S)}i($e,"onopen");function Fe(p){D(p,d),p.reserved=null,r.onclose&&r.onclose(p.id),a.length&&se(p,a.shift())}i(Fe,"onclose")}i(rr,"Postgres");function di(t,e){if(t&&t.shared)return t;let r=process.env,n=(typeof t=="string"?e:t)||{},{url:s,multihost:a}=gi(t),o=[...s.searchParams].reduce((T,[S,H])=>(T[S]=H,T),{}),c=n.hostname||n.host||a||s.hostname||r.PGHOST||"localhost",d=n.port||s.port||r.PGPORT||5432,f=n.user||n.username||s.username||r.PGUSERNAME||r.PGUSER||yi();n.no_prepare&&(n.prepare=!1),o.sslmode&&(o.ssl=o.sslmode,delete o.sslmode),"timeout"in n&&(console.log("The timeout option is deprecated, use idle_timeout instead"),n.idle_timeout=n.timeout);let y={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:pi,max_pipeline:100,backoff:hi,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(c)?c:c.split(",").map(T=>T.split(":")[0]),port:Array.isArray(d)?d:c.split(",").map(T=>parseInt(T.split(":")[1]||d)),path:n.path||c.indexOf("/")>-1&&c+"/.s.PGSQL."+d,database:n.database||n.db||(s.pathname||"").slice(1)||r.PGDATABASE||f,user:f,pass:n.pass||n.password||s.password||r.PGPASSWORD||"",...Object.entries(y).reduce((T,[S,H])=>(T[S]=S in n?n[S]:S in o?o[S]==="disable"||o[S]==="false"?!1:o[S]:r["PG"+S.toUpperCase()]||H,T),{}),connection:{application_name:"postgres.js",...n.connection,...Object.entries(o).reduce((T,[S,H])=>(S in y||(T[S]=H),T),{})},types:n.types||{},target_session_attrs:fi(n,s,r),onnotice:n.onnotice,onnotify:n.onnotify,onclose:n.onclose,onparameter:n.onparameter,socket:n.socket,transform:mi(n.transform||{undefined:void 0}),parameters:{},shared:{retries:0,typeArrayMap:{}},...yn(n.types)}}i(di,"parseOptions");function fi(t,e,r){let n=t.target_session_attrs||e.searchParams.get("target_session_attrs")||r.PGTARGETSESSIONATTRS;if(!n||["read-write","read-only","primary","standby","prefer-standby"].includes(n))return n;throw new Error("target_session_attrs "+n+" is not supported")}i(fi,"tsa");function hi(t){return(.5+Math.random()/2)*Math.min(3**t/100,20)}i(hi,"backoff");function pi(){return 60*(30+Math.random()*30)}i(pi,"max_lifetime");function mi(t){return{undefined:t.undefined,column:{from:typeof t.column=="function"?t.column:t.column&&t.column.from,to:t.column&&t.column.to},value:{from:typeof t.value=="function"?t.value:t.value&&t.value.from,to:t.value&&t.value.to},row:{from:typeof t.row=="function"?t.row:t.row&&t.row.from,to:t.row&&t.row.to}}}i(mi,"parseTransform");function gi(t){if(typeof t!="string")return{url:{searchParams:new Map}};let e=t;e=e.slice(e.indexOf("://")+3).split(/[?/]/)[0],e=decodeURIComponent(e.slice(e.indexOf("@")+1));let r=new URL(t.replace(e,e.split(",")[0]));return{url:{username:decodeURIComponent(r.username),password:decodeURIComponent(r.password),host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,searchParams:r.searchParams},multihost:e.indexOf(",")>-1&&e}}i(gi,"parseUrl");function yi(){try{return xn.default.userInfo().username}catch{return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}i(yi,"osUsername");async function vi(t){let e=An({host:mt.PG_DATABASE_HOST,port:Number(mt.PG_DATABASE_PORT),user:mt.PG_DATABASE_USER,password:mt.PG_DATABASE_PASS,database:mt.PG_DATABASE_NAME,ssl:mt.PG_SSL_MODE==="require"?"prefer":!1});try{let r=await e`select * from user`;return{statusCode:200,body:{args:t,user:r.length}}}catch(r){return{statusCode:r?.status??500,body:{error:r?.message??"Internal Server Error"}}}finally{await e.end()}}i(vi,"main");0&&(module.exports={main});
