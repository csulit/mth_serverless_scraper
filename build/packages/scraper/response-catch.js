var ks=Object.create;var Pt=Object.defineProperty;var Es=Object.getOwnPropertyDescriptor;var Ts=Object.getOwnPropertyNames;var Ss=Object.getPrototypeOf,xs=Object.prototype.hasOwnProperty;var i=(t,e)=>Pt(t,"name",{value:e,configurable:!0});var Gr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Os=(t,e)=>{for(var r in e)Pt(t,r,{get:e[r],enumerable:!0})},Fr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ts(e))!xs.call(t,s)&&s!==r&&Pt(t,s,{get:()=>e[s],enumerable:!(n=Es(e,s))||n.enumerable});return t};var Ke=(t,e,r)=>(r=t!=null?ks(Ss(t)):{},Fr(e||!t||!t.__esModule?Pt(r,"default",{value:t,enumerable:!0}):r,t)),As=t=>Fr(Pt({},"__esModule",{value:!0}),t);var En=Gr((co,ni)=>{ni.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var On=Gr((uo,Ge)=>{var Tn=require("fs"),jr=require("path"),si=require("os"),ai=require("crypto"),ii=En(),Rr=ii.version,oi=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function ci(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=oi.exec(r))!=null;){let s=n[1],a=n[2]||"";a=a.trim();let o=a[0];a=a.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(a=a.replace(/\\n/g,`
`),a=a.replace(/\\r/g,"\r")),e[s]=a}return e}i(ci,"parse");function ui(t){let e=xn(t),r=te.configDotenv({path:e});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);let n=Sn(t).split(","),s=n.length,a;for(let o=0;o<s;o++)try{let c=n[o].trim(),d=fi(r,c);a=te.decrypt(d.ciphertext,d.key);break}catch(c){if(o+1>=s)throw c}return te.parse(a)}i(ui,"_parseVault");function li(t){console.log(`[dotenv@${Rr}][INFO] ${t}`)}i(li,"_log");function di(t){console.log(`[dotenv@${Rr}][WARN] ${t}`)}i(di,"_warn");function Ir(t){console.log(`[dotenv@${Rr}][DEBUG] ${t}`)}i(Ir,"_debug");function Sn(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}i(Sn,"_dotenvKey");function fi(t,e){let r;try{r=new URL(e)}catch(c){throw c.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):c}let n=r.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let s=r.searchParams.get("environment");if(!s)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let a=`DOTENV_VAULT_${s.toUpperCase()}`,o=t.parsed[a];if(!o)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${a} in your .env.vault file.`);return{ciphertext:o,key:n}}i(fi,"_instructions");function xn(t){let e=jr.resolve(process.cwd(),".env");return t&&t.path&&t.path.length>0&&(e=t.path),e.endsWith(".vault")?e:`${e}.vault`}i(xn,"_vaultPath");function hi(t){return t[0]==="~"?jr.join(si.homedir(),t.slice(1)):t}i(hi,"_resolveHome");function pi(t){li("Loading env from encrypted .env.vault");let e=te._parseVault(t),r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),te.populate(r,e,t),{parsed:e}}i(pi,"_configVault");function mi(t){let e=jr.resolve(process.cwd(),".env"),r="utf8",n=Boolean(t&&t.debug);t&&(t.path!=null&&(e=hi(t.path)),t.encoding!=null&&(r=t.encoding));try{let s=te.parse(Tn.readFileSync(e,{encoding:r})),a=process.env;return t&&t.processEnv!=null&&(a=t.processEnv),te.populate(a,s,t),{parsed:s}}catch(s){return n&&Ir(`Failed to load ${e} ${s.message}`),{error:s}}}i(mi,"configDotenv");function gi(t){let e=xn(t);return Sn(t).length===0?te.configDotenv(t):Tn.existsSync(e)?te._configVault(t):(di(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),te.configDotenv(t))}i(gi,"config");function yi(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),s=n.slice(0,12),a=n.slice(-16);n=n.slice(12,-16);try{let o=ai.createDecipheriv("aes-256-gcm",r,s);return o.setAuthTag(a),`${o.update(n)}${o.final()}`}catch(o){let c=o instanceof RangeError,d=o.message==="Invalid key length",f=o.message==="Unsupported state or unable to authenticate data";if(c||d){let y="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(y)}else if(f){let y="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(y)}else throw console.error("Error: ",o.code),console.error("Error: ",o.message),o}}i(yi,"decrypt");function vi(t,e,r={}){let n=Boolean(r&&r.debug),s=Boolean(r&&r.override);if(typeof e!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let a of Object.keys(e))Object.prototype.hasOwnProperty.call(t,a)?(s===!0&&(t[a]=e[a]),n&&Ir(s===!0?`"${a}" is already defined and WAS overwritten`:`"${a}" is already defined and was NOT overwritten`)):t[a]=e[a]}i(vi,"populate");var te={configDotenv:mi,_configVault:pi,_parseVault:ui,config:gi,decrypt:yi,parse:ci,populate:vi};Ge.exports.configDotenv=te.configDotenv;Ge.exports._configVault=te._configVault;Ge.exports._parseVault=te._parseVault;Ge.exports.config=te.config;Ge.exports.decrypt=te.decrypt;Ge.exports.parse=te.parse;Ge.exports.populate=te.populate;Ge.exports=te});var bi={};Os(bi,{main:()=>_i});module.exports=As(bi);var ln=Ke(require("os"),1),dn=Ke(require("fs"),1);var Zt=new Map,or=new Map,cr=Symbol("OriginError"),Et={},de=class extends Promise{constructor(e,r,n,s,a={}){let o,c;super((d,f)=>{o=d,c=f}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=r,this.handler=n,this.canceller=s,this.options=a,this.state=null,this.statement=null,this.resolve=d=>(this.active=!1,o(d)),this.reject=d=>(this.active=!1,c(d)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[cr]=this.handler.debug?new Error:this.tagged&&Cs(this.strings)}get origin(){return this.handler.debug?this[cr].stack:this.tagged?or.has(this.strings)?or.get(this.strings):or.set(this.strings,this[cr].stack).get(this.strings):""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,r){if(this.options.simple=!1,typeof e=="function"&&(r=e,e=1),this.cursorRows=e,typeof r=="function")return this.cursorFn=r,this;let n;return{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};n&&n();let s=new Promise((a,o)=>{this.cursorFn=c=>(a({value:c,done:!1}),new Promise(d=>n=d)),this.resolve=()=>(this.active=!1,a({done:!0})),this.reject=c=>(this.active=!1,o(c))});return this.execute(),s},return(){return n&&n(Et),{done:!0}}})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw new Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}};i(de,"Query");function Cs(t){if(Zt.has(t))return Zt.get(t);let e=Error.stackTraceLimit;return Error.stackTraceLimit=4,Zt.set(t,new Error),Error.stackTraceLimit=e,Zt.get(t)}i(Cs,"cachedError");var Ye=class extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}};i(Ye,"PostgresError");var q={connection:Wr,postgres:Kr,generic:Yr,notSupported:Hr};function Wr(t,e,r){let{host:n,port:s}=r||e,a=Object.assign(new Error("write "+t+" "+(e.path||n+":"+s)),{code:t,errno:t,address:e.path||n},e.path?{}:{port:s});return Error.captureStackTrace(a,Wr),a}i(Wr,"connection");function Kr(t){let e=new Ye(t);return Error.captureStackTrace(e,Kr),e}i(Kr,"postgres");function Yr(t,e){let r=Object.assign(new Error(t+": "+e),{code:t});return Error.captureStackTrace(r,Yr),r}i(Yr,"generic");function Hr(t){let e=Object.assign(new Error(t+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:t});return Error.captureStackTrace(e,Hr),e}i(Hr,"notSupported");var Ns={string:{to:25,from:null,serialize:t=>""+t},number:{to:0,from:[21,23,26,700,701],serialize:t=>""+t,parse:t=>+t},json:{to:114,from:[114,3802],serialize:t=>JSON.stringify(t),parse:t=>JSON.parse(t)},boolean:{to:16,from:16,serialize:t=>t===!0?"t":"f",parse:t=>t==="t"},date:{to:1184,from:[1082,1114,1184],serialize:t=>(t instanceof Date?t:new Date(t)).toISOString(),parse:t=>new Date(t)},bytea:{to:17,from:17,serialize:t=>"\\x"+Buffer.from(t).toString("hex"),parse:t=>Buffer.from(t.slice(2),"hex")}},Tt=class{then(){lr()}catch(){lr()}finally(){lr()}};i(Tt,"NotTagged");var ut=class extends Tt{constructor(e){super(),this.value=Wt(e)}};i(ut,"Identifier");var Ee=class extends Tt{constructor(e,r,n){super(),this.value=e,this.type=r,this.array=n}};i(Ee,"Parameter");var St=class extends Tt{constructor(e,r){super(),this.first=e,this.rest=r}build(e,r,n,s){let a=Is.map(([o,c])=>({fn:c,i:e.search(o)})).sort((o,c)=>o.i-c.i).pop();return a.i===-1?mr(this.first,s):a.fn(this.first,this.rest,r,n,s)}};i(St,"Builder");function Ft(t,e,r,n){let s=t instanceof Ee?t.value:t;if(s===void 0&&(t instanceof Ee?t.value=n.transform.undefined:s=t=n.transform.undefined,s===void 0))throw q.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+r.push(t instanceof Ee?(e.push(t.value),t.array?t.array[t.type||Gt(t.value)]||t.type||qr(t.value):t.type):(e.push(t),Gt(t)))}i(Ft,"handleValue");var Jr=tn(Ns);function hr(t,e,r,n,s,a){for(let o=1;o<t.strings.length;o++)e+=pr(e,r,n,s,a)+t.strings[o],r=t.args[o];return e}i(hr,"stringify");function pr(t,e,r,n,s){return e instanceof St?e.build(t,r,n,s):e instanceof de?fr(e,r,n,s):e instanceof ut?e.value:e&&e[0]instanceof de?e.reduce((a,o)=>a+" "+fr(o,r,n,s),""):Ft(e,r,n,s)}i(pr,"stringifyValue");function fr(t,e,r,n){return t.fragment=!0,hr(t,t.strings[0],t.args[0],e,r,n)}i(fr,"fragment");function Xr(t,e,r,n,s){return t.map(a=>"("+n.map(o=>pr("values",a[o],e,r,s)).join(",")+")").join(",")}i(Xr,"valuesBuilder");function Qr(t,e,r,n,s){let a=Array.isArray(t[0]),o=e.length?e.flat():Object.keys(a?t[0]:t);return Xr(a?t:[t],r,n,o,s)}i(Qr,"values");function ur(t,e,r,n,s){if(typeof t=="string"&&(t=[t].concat(e)),Array.isArray(t))return mr(t,s);let a;return(e.length?e.flat():Object.keys(t)).map(c=>(a=t[c],(a instanceof de?fr(a,r,n,s):a instanceof ut?a.value:Ft(a,r,n,s))+" as "+Wt(s.transform.column.to?s.transform.column.to(c):c))).join(",")}i(ur,"select");var Is=Object.entries({values:Qr,in:(...t)=>{let e=Qr(...t);return e==="()"?"(null)":e},select:ur,as:ur,returning:ur,update(t,e,r,n,s){return(e.length?e.flat():Object.keys(t)).map(a=>Wt(s.transform.column.to?s.transform.column.to(a):a)+"="+pr("values",t[a],r,n,s))},insert(t,e,r,n,s){let a=e.length?e.flat():Object.keys(Array.isArray(t)?t[0]:t);return"("+mr(a,s)+")values"+Xr(Array.isArray(t)?t:[t],r,n,a,s)}}).map(([t,e])=>[new RegExp("((?:^|[\\s(])"+t+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),e]);function lr(){throw q.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}i(lr,"notTagged");var js=Jr.serializers,Rs=Jr.parsers;function qr(t){return Array.isArray(t)?qr(t[0]):typeof t=="string"?1009:0}i(qr,"firstIsString");var en=i(function(t){let e=tn(t||{});return{serializers:Object.assign({},js,e.serializers),parsers:Object.assign({},Rs,e.parsers)}},"mergeUserTypes");function tn(t){return Object.keys(t).reduce((e,r)=>(t[r].from&&[].concat(t[r].from).forEach(n=>e.parsers[n]=t[r].parse),e.serializers[t[r].to]=t[r].serialize,t[r].from&&[].concat(t[r].from).forEach(n=>e.serializers[n]=t[r].serialize),e),{parsers:{},serializers:{}})}i(tn,"typeHandlers");function mr(t,{transform:{column:e}}){return t.map(r=>Wt(e.to?e.to(r):r)).join(",")}i(mr,"escapeIdentifiers");var Wt=i(function(e){return'"'+e.replace(/"/g,'""').replace(/\./g,'"."')+'"'},"escape"),Gt=i(function t(e){return e instanceof Ee?e.type:e instanceof Date?1184:e instanceof Uint8Array?17:e===!0||e===!1?16:typeof e=="bigint"?20:Array.isArray(e)?t(e[0]):0},"inferType"),Ps=/\\/g,Ds=/"/g;function Bs(t){return t.replace(Ps,"\\\\").replace(Ds,'\\"')}i(Bs,"arrayEscape");var rn=i(function t(e,r,n,s){if(Array.isArray(e)===!1)return e;if(!e.length)return"{}";let a=e[0],o=s===1020?";":",";return Array.isArray(a)&&!a.type?"{"+e.map(c=>t(c,r,n,s)).join(o)+"}":"{"+e.map(c=>{if(c===void 0&&(c=n.transform.undefined,c===void 0))throw q.generic("UNDEFINED_VALUE","Undefined values are not allowed");return c===null?"null":'"'+Bs(r?r(c.type?c.value:c):""+c)+'"'}).join(o)+"}"},"arraySerializer"),dr={i:0,char:null,str:"",quoted:!1,last:0},nn=i(function(e,r,n){return dr.i=dr.last=0,sn(dr,e,r,n)},"arrayParser");function sn(t,e,r,n){let s=[],a=n===1020?";":",";for(;t.i<e.length;t.i++){if(t.char=e[t.i],t.quoted)t.char==="\\"?t.str+=e[++t.i]:t.char==='"'?(s.push(r?r(t.str):t.str),t.str="",t.quoted=e[t.i+1]==='"',t.last=t.i+2):t.str+=t.char;else if(t.char==='"')t.quoted=!0;else if(t.char==="{")t.last=++t.i,s.push(sn(t,e,r,n));else if(t.char==="}"){t.quoted=!1,t.last<t.i&&s.push(r?r(e.slice(t.last,t.i)):e.slice(t.last,t.i)),t.last=t.i+1;break}else t.char===a&&t.p!=="}"&&t.p!=='"'&&(s.push(r?r(e.slice(t.last,t.i)):e.slice(t.last,t.i)),t.last=t.i+1);t.p=t.char}return t.last<t.i&&s.push(r?r(e.slice(t.last,t.i+1)):e.slice(t.last,t.i+1)),s}i(sn,"arrayParserLoop");var lt=i(t=>{let e=t[0];for(let r=1;r<t.length;r++)e+=t[r]==="_"?t[++r].toUpperCase():t[r];return e},"toCamel"),dt=i(t=>{let e=t[0].toUpperCase();for(let r=1;r<t.length;r++)e+=t[r]==="_"?t[++r].toUpperCase():t[r];return e},"toPascal"),ft=i(t=>t.replace(/_/g,"-"),"toKebab"),Dt=i(t=>t.replace(/([A-Z])/g,"_$1").toLowerCase(),"fromCamel"),Bt=i(t=>(t.slice(0,1)+t.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),"fromPascal"),Mt=i(t=>t.replace(/-/g,"_"),"fromKebab");function gr(t){return i(function e(r,n){return typeof r=="object"&&r!==null&&(n.type===114||n.type===3802)?Array.isArray(r)?r.map(s=>e(s,n)):Object.entries(r).reduce((s,[a,o])=>Object.assign(s,{[t(a)]:e(o,n)}),{}):r},"jsonTransform")}i(gr,"createJsonTransform");lt.column={from:lt};lt.value={from:gr(lt)};Dt.column={to:Dt};var yr={...lt};yr.column.to=Dt;dt.column={from:dt};dt.value={from:gr(dt)};Bt.column={to:Bt};var vr={...dt};vr.column.to=Bt;ft.column={from:ft};ft.value={from:gr(ft)};Mt.column={to:Mt};var _r={...ft};_r.column.to=Mt;var kr=Ke(require("net"),1),cn=Ke(require("tls"),1),Ot=Ke(require("crypto"),1),Ht=Ke(require("stream"),1);var Le=class extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}};i(Le,"Result");var Te=Ms;function Ms(t=[]){let e=t.slice(),r=0;return{get length(){return e.length-r},remove:n=>{let s=e.indexOf(n);return s===-1?null:(e.splice(s,1),n)},push:n=>(e.push(n),n),shift:()=>{let n=e[r++];return r===e.length?(r=0,e=[]):e[r-1]=void 0,n}}}i(Ms,"Queue");var oe=Buffer.allocUnsafe(256),$s="BCcDdEFfHPpQSX".split("").reduce((t,e)=>{let r=e.charCodeAt(0);return t[e]=()=>(oe[0]=r,M.i=5,M),t},{}),M=Object.assign(Us,$s,{N:String.fromCharCode(0),i:0,inc(t){return M.i+=t,M},str(t){let e=Buffer.byteLength(t);return Kt(e),M.i+=oe.write(t,M.i,e,"utf8"),M},i16(t){return Kt(2),oe.writeUInt16BE(t,M.i),M.i+=2,M},i32(t,e){return e||e===0?(oe.writeUInt32BE(t,e),M):(Kt(4),oe.writeUInt32BE(t,M.i),M.i+=4,M)},z(t){return Kt(t),oe.fill(0,M.i,M.i+t),M.i+=t,M},raw(t){return oe=Buffer.concat([oe.subarray(0,M.i),t]),M.i=oe.length,M},end(t=1){oe.writeUInt32BE(M.i-t,t);let e=oe.subarray(0,M.i);return M.i=0,oe=Buffer.allocUnsafe(256),e}}),b=M;function Kt(t){if(oe.length-M.i<t){let e=oe,r=e.length;oe=Buffer.allocUnsafe(r+(r>>1)+t),e.copy(oe)}}i(Kt,"fit");function Us(){return M.i=0,M}i(Us,"reset");var Er=un,Ls=1,He=b().S().end(),an=b().H().end(),Vs=b().i32(8).i32(80877103).end(8),zs=Buffer.concat([b().E().str(b.N).i32(0).end(),He]),Zs=b().D().str("S").str(b.N).end(),xt=i(()=>{},"noop"),Gs=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),Fs={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function un(t,e={},{onopen:r=xt,onend:n=xt,onclose:s=xt}={}){let{ssl:a,max:o,user:c,host:d,port:f,database:y,parsers:T,transform:S,onnotice:Q,onnotify:W,onparameter:E,max_pipeline:ce,keep_alive:$,backoff:he,target_session_attrs:Ne}=t,D=Te(),Be=Ls++,Me={pid:null,secret:null},bt=wr(ar,t.idle_timeout),ct=wr(ar,t.max_lifetime),B=wr(Dn,t.connect_timeout),v=null,$e,j=new Le,ae=Buffer.alloc(0),Ct=t.fetch_types,Ue={},Fe={},p=Math.random().toString(36).slice(2),I=1,z=0,J=0,ie=0,X=0,U=0,N=0,Z=0,L=null,G=null,re=!1,we=null,We=null,ke=null,K=null,F=null,ve=null,Lt=null,nr=null,m=null,Nt=null,ue={queue:e.closed,idleTimer:bt,connect(u){ke=u,Ur()},terminate:jt,execute:It,cancel:In,end:ar,count:0,id:Be};return e.closed&&e.closed.push(ue),ue;async function Nn(){let u;try{u=t.socket?await Promise.resolve(t.socket(t)):kr.default.Socket()}catch(l){kt(l);return}return u.on("error",kt),u.on("close",Lr),u.on("drain",Mr),u}i(Nn,"createSocket");async function In({pid:u,secret:l},w,P){try{$e=b().i32(16).i32(80877102).i32(u).i32(l).end(16),await $r(),v.once("error",P),v.once("close",w)}catch(Y){P(Y)}}i(In,"cancel");function It(u){if(re)return zt(u,q.connection("CONNECTION_DESTROYED",t));if(!u.cancelled)try{return u.state=Me,m?D.push(u):(m=u,m.active=!0),Pn(u),ne(jn(u))&&!u.describeFirst&&!u.cursorFn&&D.length<ce&&(!u.options.onexecute||u.options.onexecute(ue))}catch(l){return D.length===0&&ne(He),Ie(l),!0}}i(It,"execute");function jn(u){if(u.parameters.length>=65534)throw q.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return u.options.simple?b().Q().str(u.statement.string+b.N).end():u.describeFirst?Buffer.concat([Pr(u),an]):u.prepare?u.prepared?Vt(u):Buffer.concat([Pr(u),Vt(u)]):Rn(u)}i(jn,"toBuffer");function Pr(u){return Buffer.concat([zr(u.statement.string,u.parameters,u.statement.types,u.statement.name),_s("S",u.statement.name)])}i(Pr,"describe");function Vt(u){return Buffer.concat([vs(u.parameters,u.statement.types,u.statement.name,u.cursorName),u.cursorFn?Zr("",u.cursorRows):zs])}i(Vt,"prepared");function Rn(u){return Buffer.concat([zr(u.statement.string,u.parameters,u.statement.types),Zs,Vt(u)])}i(Rn,"unnamed");function Pn(u){let l=[],w=[],P=hr(u,u.strings[0],u.args[0],l,w,t);!u.tagged&&u.args.forEach(Y=>Ft(Y,l,w,t)),u.prepare=t.prepare&&("prepare"in u.options?u.options.prepare:!0),u.string=P,u.signature=u.prepare&&w+P,u.onlyDescribe&&delete Fe[u.signature],u.parameters=u.parameters||l,u.prepared=u.prepare&&u.signature in Fe,u.describeFirst=u.onlyDescribe||l.length&&!u.prepared,u.statement=u.prepared?Fe[u.signature]:{string:P,types:w,name:u.prepare?p+I++:""},typeof t.debug=="function"&&t.debug(Be,P,l,w)}i(Pn,"build");function ne(u,l){return ve=ve?Buffer.concat([ve,u]):Buffer.from(u),l||ve.length>=1024?Dr(l):(G===null&&(G=setImmediate(Dr)),!0)}i(ne,"write");function Dr(u){let l=v.write(ve,u);return G!==null&&clearImmediate(G),ve=G=null,l}i(Dr,"nextWrite");function Dn(){Ie(q.connection("CONNECT_TIMEOUT",t,v)),v.destroy()}i(Dn,"connectTimedOut");async function Br(){if(ne(Vs),!await new Promise(l=>v.once("data",w=>l(w[0]===83)))&&a==="prefer")return wt();v.removeAllListeners(),v=cn.default.connect({socket:v,servername:kr.default.isIP(v.host)?void 0:v.host,...a==="require"||a==="allow"||a==="prefer"?{rejectUnauthorized:!1}:a==="verify-full"?{}:typeof a=="object"?a:{}}),v.on("secureConnect",wt),v.on("error",kt),v.on("close",Lr),v.on("drain",Mr)}i(Br,"secure");function Mr(){!m&&r(ue)}i(Mr,"drain");function sr(u){if(!(we&&(we.push(u),J-=u.length,J>=0)))for(ae=we?Buffer.concat(we,U-J):ae.length===0?u:Buffer.concat([ae,u],ae.length+u.length);ae.length>4;){if(U=ae.readUInt32BE(1),U>=ae.length){J=U-ae.length,we=[ae];break}try{Bn(ae.subarray(0,U+1))}catch(l){m&&(m.cursorFn||m.describeFirst)&&ne(He),Ie(l)}ae=ae.subarray(U+1),J=0,we=null}}i(sr,"data");async function $r(){if(re=!1,Ue={},v||(v=await Nn()),!!v){if(B.start(),t.socket)return a?Br():wt();if(v.on("connect",a?Br:wt),t.path)return v.connect(t.path);v.connect(f[ie],d[ie]),v.host=d[ie],v.port=f[ie],ie=(ie+1)%f.length}}i($r,"connect");function Ur(){setTimeout($r,z?z+N-Number(process.hrtime.bigint()/1000000n):0)}i(Ur,"reconnect");function wt(){try{Fe={},Ct=t.fetch_types,p=Math.random().toString(36).slice(2),I=1,ct.start(),v.on("data",sr),$&&v.setKeepAlive&&v.setKeepAlive(!0,1e3*$);let u=ws();ne(u)}catch(u){kt(u)}}i(wt,"connected");function kt(u){if(!(ue.queue===e.connecting&&t.host[X+1]))for(Ie(u);D.length;)zt(D.shift(),u)}i(kt,"error");function Ie(u){F&&(F.destroy(u),F=null),m&&zt(m,u),ke&&(zt(ke,u),ke=null)}i(Ie,"errored");function zt(u,l){u.reject(Object.create(l,{stack:{value:l.stack+u.origin.replace(/.*\n/,`
`),enumerable:t.debug},query:{value:u.string,enumerable:t.debug},parameters:{value:u.parameters,enumerable:t.debug},args:{value:u.args,enumerable:t.debug},types:{value:u.statement&&u.statement.types,enumerable:t.debug}}))}i(zt,"queryError");function ar(){return K||(!ue.reserved&&n(ue),!ue.reserved&&!ke&&!m&&D.length===0?(jt(),new Promise(u=>v&&v.readyState!=="closed"?v.once("close",u):u())):K=new Promise(u=>Lt=u))}i(ar,"end");function jt(){re=!0,(F||m||ke||D.length)&&kt(q.connection("CONNECTION_DESTROYED",t)),clearImmediate(G),v&&(v.removeListener("data",sr),v.removeListener("connect",wt),v.readyState==="open"&&v.end(b().X().end())),Lt&&(Lt(),K=Lt=null)}i(jt,"terminate");async function Lr(u){if(ae=Buffer.alloc(0),J=0,we=null,clearImmediate(G),v.removeListener("data",sr),v.removeListener("connect",wt),bt.cancel(),ct.cancel(),B.cancel(),v.encrypted&&(v.removeAllListeners(),v=null),ke)return Ur();!u&&(m||D.length)&&kt(q.connection("CONNECTION_CLOSED",t,v)),z=Number(process.hrtime.bigint()/1000000n),u&&t.shared.retries++,N=(typeof he=="function"?he(t.shared.retries):he)*1e3,s(ue)}i(Lr,"closed");function Bn(u,l=u[0]){(l===68?Mn:l===100?ls:l===65?ss:l===83?$n:l===90?Un:l===67?Ln:l===50?Vr:l===49?Vn:l===116?zn:l===84?Zn:l===82?Gn:l===110?Qn:l===75?Jn:l===69?rs:l===115?as:l===51?is:l===71?os:l===78?fs:l===72?cs:l===99?ds:l===73?hs:l===86?ps:l===118?ms:l===87?us:gs)(u)}i(Bn,"handle");function Mn(u){let l=7,w,P,Y,se=m.isRaw?new Array(m.statement.columns.length):{};for(let le=0;le<m.statement.columns.length;le++)P=m.statement.columns[le],w=u.readInt32BE(l),l+=4,Y=w===-1?null:m.isRaw===!0?u.subarray(l,l+=w):P.parser===void 0?u.toString("utf8",l,l+=w):P.parser.array===!0?P.parser(u.toString("utf8",l+1,l+=w)):P.parser(u.toString("utf8",l,l+=w)),m.isRaw?se[le]=m.isRaw===!0?Y:S.value.from?S.value.from(Y,P):Y:se[P.name]=S.value.from?S.value.from(Y,P):Y;m.forEachFn?m.forEachFn(S.row.from?S.row.from(se):se,j):j[Z++]=S.row.from?S.row.from(se):se}i(Mn,"DataRow");function $n(u){let[l,w]=u.toString("utf8",5,u.length-1).split(b.N);Ue[l]=w,t.parameters[l]!==w&&(t.parameters[l]=w,E&&E(l,w))}i($n,"ParameterStatus");function Un(u){if(m&&m.options.simple&&m.resolve(We||j),m=We=null,j=new Le,B.cancel(),ke){if(Ne){if(!Ue.in_hot_standby||!Ue.default_transaction_read_only)return ts();if(es(Ne,Ue))return jt()}if(Ct)return Xn();It(ke),t.shared.retries=X=ke=0;return}for(;D.length&&(m=D.shift())&&(m.active=!0,m.cancelled);)un(t).cancel(m.state,m.cancelled.resolve,m.cancelled.reject);m||(ue.reserved?u[5]===73?K?jt():(ue.reserved=null,r(ue)):ue.reserved():K?jt():r(ue))}i(Un,"ReadyForQuery");function Ln(u){Z=0;for(let l=u.length-1;l>0;l--)if(u[l]===32&&u[l+1]<58&&j.count===null&&(j.count=+u.toString("utf8",l+1,u.length-1)),u[l-1]>=65){j.command=u.toString("utf8",5,l),j.state=Me;break}if(Nt&&(Nt(),Nt=null),j.command==="BEGIN"&&o!==1&&!ue.reserved)return Ie(q.generic("UNSAFE_TRANSACTION","Only use sql.begin or max: 1"));if(m.options.simple)return Vr();m.cursorFn&&(j.count&&m.cursorFn(j),ne(He)),m.resolve(j)}i(Ln,"CommandComplete");function Vn(){m.parsing=!1}i(Vn,"ParseComplete");function Vr(){!j.statement&&(j.statement=m.statement),j.columns=m.statement.columns}i(Vr,"BindComplete");function zn(u){let l=u.readUInt16BE(5);for(let w=0;w<l;++w)!m.statement.types[w]&&(m.statement.types[w]=u.readUInt32BE(7+w*4));m.prepare&&(Fe[m.signature]=m.statement),m.describeFirst&&!m.onlyDescribe&&(ne(Vt(m)),m.describeFirst=!1)}i(zn,"ParameterDescription");function Zn(u){j.command&&(We=We||[j],We.push(j=new Le),j.count=null,m.statement.columns=null);let l=u.readUInt16BE(5),w=7,P;m.statement.columns=Array(l);for(let Y=0;Y<l;++Y){for(P=w;u[w++]!==0;);let se=u.readUInt32BE(w),le=u.readUInt16BE(w+4),Rt=u.readUInt32BE(w+6);m.statement.columns[Y]={name:S.column.from?S.column.from(u.toString("utf8",P,w-1)):u.toString("utf8",P,w-1),parser:T[Rt],table:se,number:le,type:Rt},w+=18}if(j.statement=m.statement,m.onlyDescribe)return m.resolve(m.statement),ne(He)}i(Zn,"RowDescription");async function Gn(u,l=u.readUInt32BE(5)){(l===3?Fn:l===5?Wn:l===10?Kn:l===11?Yn:l===12?Hn:l!==0?ys:xt)(u,l)}i(Gn,"Authentication");async function Fn(){ne(b().p().str(await ir()).z(1).end())}i(Fn,"AuthenticationCleartextPassword");async function Wn(u){ne(b().p().str("md5"+on(Buffer.concat([Buffer.from(on(await ir()+c)),u.subarray(9)]))).z(1).end())}i(Wn,"AuthenticationMD5Password");function Kn(){b().p().str("SCRAM-SHA-256"+b.N);let u=b.i;nr=Ot.default.randomBytes(18).toString("base64"),ne(b.inc(4).str("n,,n=*,r="+nr).i32(b.i-u-4,u).end())}i(Kn,"SASL");async function Yn(u){let l=u.toString("utf8",9).split(",").reduce((se,le)=>(se[le[0]]=le.slice(2),se),{}),w=Ot.default.pbkdf2Sync(await ir(),Buffer.from(l.s,"base64"),parseInt(l.i),32,"sha256"),P=Yt(w,"Client Key"),Y="n=*,r="+nr+",r="+l.r+",s="+l.s+",i="+l.i+",c=biws,r="+l.r;L=Yt(Yt(w,"Server Key"),Y).toString("base64"),ne(b().p().str("c=biws,r="+l.r+",p="+Ks(P,Yt(Ws(P),Y)).toString("base64")).end())}i(Yn,"SASLContinue");function Hn(u){u.toString("utf8",9).split(b.N,1)[0].slice(2)!==L&&(Ie(q.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),v.destroy())}i(Hn,"SASLFinal");function ir(){return Promise.resolve(typeof t.pass=="function"?t.pass():t.pass)}i(ir,"Pass");function Qn(){if(j.statement=m.statement,j.statement.columns=[],m.onlyDescribe)return m.resolve(m.statement),ne(He)}i(Qn,"NoData");function Jn(u){Me.pid=u.readUInt32BE(5),Me.secret=u.readUInt32BE(9)}i(Jn,"BackendKeyData");async function Xn(){Ct=!1,(await new de([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],It)).forEach(({oid:l,typarray:w})=>qn(l,w))}i(Xn,"fetchArrayTypes");function qn(u,l){if(!!t.parsers[l]&&!!t.serializers[l])return;let w=t.parsers[u];t.shared.typeArrayMap[u]=l,t.parsers[l]=P=>nn(P,w,l),t.parsers[l].array=!0,t.serializers[l]=P=>rn(P,t.serializers[u],t,l)}i(qn,"addArrayType");function es(u,l){return u==="read-write"&&l.default_transaction_read_only==="on"||u==="read-only"&&l.default_transaction_read_only==="off"||u==="primary"&&l.in_hot_standby==="on"||u==="standby"&&l.in_hot_standby==="off"||u==="prefer-standby"&&l.in_hot_standby==="off"&&t.host[X]}i(es,"tryNext");function ts(){let u=new de([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],It,null,{simple:!0});u.resolve=([[l],[w]])=>{Ue.default_transaction_read_only=l.transaction_read_only,Ue.in_hot_standby=w.pg_is_in_recovery?"on":"off"},u.execute()}i(ts,"fetchState");function rs(u){m&&(m.cursorFn||m.describeFirst)&&ne(He);let l=q.postgres(br(u));m&&m.retried?Ie(m.retried):m&&Gs.has(l.routine)?ns(m,l):Ie(l)}i(rs,"ErrorResponse");function ns(u,l){delete Fe[u.signature],u.retried=l,It(u)}i(ns,"retry");function ss(u){if(!W)return;let l=9;for(;u[l++]!==0;);W(u.toString("utf8",9,l-1),u.toString("utf8",l,u.length-1))}i(ss,"NotificationResponse");async function as(){try{let u=await Promise.resolve(m.cursorFn(j));Z=0,u===Et?ne(bs(m.portal)):(j=new Le,ne(Zr("",m.cursorRows)))}catch(u){ne(He),m.reject(u)}}i(as,"PortalSuspended");function is(){j.count&&m.cursorFn(j),m.resolve(j)}i(is,"CloseComplete");function os(){F=new Ht.default.Writable({autoDestroy:!0,write(u,l,w){v.write(b().d().raw(u).end(),w)},destroy(u,l){l(u),v.write(b().f().str(u+b.N).end()),F=null},final(u){v.write(b().c().end()),Nt=u}}),m.resolve(F)}i(os,"CopyInResponse");function cs(){F=new Ht.default.Readable({read(){v.resume()}}),m.resolve(F)}i(cs,"CopyOutResponse");function us(){F=new Ht.default.Duplex({autoDestroy:!0,read(){v.resume()},write(u,l,w){v.write(b().d().raw(u).end(),w)},destroy(u,l){l(u),v.write(b().f().str(u+b.N).end()),F=null},final(u){v.write(b().c().end()),Nt=u}}),m.resolve(F)}i(us,"CopyBothResponse");function ls(u){F&&(F.push(u.subarray(5))||v.pause())}i(ls,"CopyData");function ds(){F&&F.push(null),F=null}i(ds,"CopyDone");function fs(u){Q?Q(br(u)):console.log(br(u))}i(fs,"NoticeResponse");function hs(){}i(hs,"EmptyQueryResponse");function ps(){Ie(q.notSupported("FunctionCallResponse"))}i(ps,"FunctionCallResponse");function ms(){Ie(q.notSupported("NegotiateProtocolVersion"))}i(ms,"NegotiateProtocolVersion");function gs(u){console.error("Postgres.js : Unknown Message:",u[0])}i(gs,"UnknownMessage");function ys(u,l){console.error("Postgres.js : Unknown Auth:",l)}i(ys,"UnknownAuth");function vs(u,l,w="",P=""){let Y,se;return b().B().str(P+b.N).str(w+b.N).i16(0).i16(u.length),u.forEach((le,Rt)=>{if(le===null)return b.i32(4294967295);se=l[Rt],u[Rt]=le=se in t.serializers?t.serializers[se](le):""+le,Y=b.i,b.inc(4).str(le).i32(b.i-Y-4,Y)}),b.i16(0),b.end()}i(vs,"Bind");function zr(u,l,w,P=""){return b().P().str(P+b.N).str(u+b.N).i16(l.length),l.forEach((Y,se)=>b.i32(w[se]||0)),b.end()}i(zr,"Parse");function _s(u,l=""){return b().D().str(u).str(l+b.N).end()}i(_s,"Describe");function Zr(u="",l=0){return Buffer.concat([b().E().str(u+b.N).i32(l).end(),an])}i(Zr,"Execute");function bs(u=""){return Buffer.concat([b().C().str("P").str(u+b.N).end(),b().S().end()])}i(bs,"Close");function ws(){return $e||b().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:c,database:y,client_encoding:"UTF8"},t.connection)).filter(([,u])=>u).map(([u,l])=>u+b.N+l).join(b.N)).z(2).end(0)}i(ws,"StartupMessage")}i(un,"Connection");function br(t){let e={},r=5;for(let n=5;n<t.length-1;n++)t[n]===0&&(e[Fs[t[r]]]=t.toString("utf8",r+1,n),r=n+1);return e}i(br,"parseError");function on(t){return Ot.default.createHash("md5").update(t).digest("hex")}i(on,"md5");function Yt(t,e){return Ot.default.createHmac("sha256",t).update(e).digest()}i(Yt,"hmac");function Ws(t){return Ot.default.createHash("sha256").update(t).digest()}i(Ws,"sha256");function Ks(t,e){let r=Math.max(t.length,e.length),n=Buffer.allocUnsafe(r);for(let s=0;s<r;s++)n[s]=t[s]^e[s];return n}i(Ks,"xor");function wr(t,e){if(e=typeof e=="function"?e():e,!e)return{cancel:xt,start:xt};let r;return{cancel(){r&&(clearTimeout(r),r=null)},start(){r&&clearTimeout(r),r=setTimeout(n,e*1e3,arguments)}};function n(s){t.apply(null,s),r=null}}i(wr,"timer");var Ys=i(()=>{},"noop");function Tr(t,e){let r=new Map,n="postgresjs_"+Math.random().toString(36).slice(2),s={},a,o,c=!1,d=T.sql=t({...e,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...e.connection,replication:"database"},onclose:async function(){c||(o=null,s.pid=s.secret=void 0,S(await Q(d,n,e.publications)),r.forEach(E=>E.forEach(({onsubscribe:ce})=>ce())))},no_subscribe:!0}),f=d.end,y=d.close;return d.end=async()=>(c=!0,o&&await new Promise(E=>(o.once("close",E),o.end())),f()),d.close=async()=>(o&&await new Promise(E=>(o.once("close",E),o.end())),y()),T;async function T(E,ce,$=Ys){E=Js(E),a||(a=Q(d,n,e.publications));let he={fn:ce,onsubscribe:$},Ne=r.has(E)?r.get(E).add(he):r.set(E,new Set([he])).get(E),D=i(()=>{Ne.delete(he),Ne.size===0&&r.delete(E)},"unsubscribe");return a.then(Be=>(S(Be),$(),{unsubscribe:D,state:s,sql:d}))}i(T,"subscribe");function S(E){o=E.stream,s.pid=E.state.pid,s.secret=E.state.secret}i(S,"connected");async function Q(E,ce,$){if(!$)throw new Error("Missing publication names");let he=await E.unsafe(`CREATE_REPLICATION_SLOT ${ce} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[Ne]=he,D=await E.unsafe(`START_REPLICATION SLOT ${ce} LOGICAL ${Ne.consistent_point} (proto_version '1', publication_names '${$}')`).writable(),Be={lsn:Buffer.concat(Ne.consistent_point.split("/").map(B=>Buffer.from(("00000000"+B).slice(-8),"hex")))};return D.on("data",Me),D.on("error",E.close),D.on("close",E.close),{stream:D,state:he.state};function Me(B){B[0]===119?Qs(B.subarray(25),Be,E.options.parsers,bt,e.transform):B[0]===107&&B[17]&&ct()}i(Me,"data");function bt(B,v){let $e=v.relation.schema+"."+v.relation.table;W("*",B,v),W("*:"+$e,B,v),v.relation.keys.length&&W("*:"+$e+"="+v.relation.keys.map(j=>B[j.name]),B,v),W(v.command,B,v),W(v.command+":"+$e,B,v),v.relation.keys.length&&W(v.command+":"+$e+"="+v.relation.keys.map(j=>B[j.name]),B,v)}i(bt,"handle");function ct(){let B=Buffer.alloc(34);B[0]="r".charCodeAt(0),B.fill(Be.lsn,1),B.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),D.write(B)}i(ct,"pong")}i(Q,"init");function W(E,ce,$){r.has(E)&&r.get(E).forEach(({fn:he})=>he(ce,$,E))}i(W,"call")}i(Tr,"Subscribe");function Hs(t){return new Date(Date.UTC(2e3,0,1)+Number(t/BigInt(1e3)))}i(Hs,"Time");function Qs(t,e,r,n,s){let a=i((o,[c,d])=>(o[c.charCodeAt(0)]=d,o),"char");Object.entries({R:o=>{let c=1,d=e[o.readUInt32BE(c)]={schema:o.toString("utf8",c+=4,c=o.indexOf(0,c))||"pg_catalog",table:o.toString("utf8",c+1,c=o.indexOf(0,c+1)),columns:Array(o.readUInt16BE(c+=2)),keys:[]};c+=2;let f=0,y;for(;c<o.length;)y=d.columns[f++]={key:o[c++],name:s.column.from?s.column.from(o.toString("utf8",c,c=o.indexOf(0,c))):o.toString("utf8",c,c=o.indexOf(0,c)),type:o.readUInt32BE(c+=1),parser:r[o.readUInt32BE(c)],atttypmod:o.readUInt32BE(c+=4)},y.key&&d.keys.push(y),c+=4},Y:()=>{},O:()=>{},B:o=>{e.date=Hs(o.readBigInt64BE(9)),e.lsn=o.subarray(1,9)},I:o=>{let c=1,d=e[o.readUInt32BE(c)],{row:f}=Qt(o,d.columns,c+=7,s);n(f,{command:"insert",relation:d})},D:o=>{let c=1,d=e[o.readUInt32BE(c)];c+=4;let f=o[c]===75;n(f||o[c]===79?Qt(o,f?d.keys:d.columns,c+=3,s).row:null,{command:"delete",relation:d,key:f})},U:o=>{let c=1,d=e[o.readUInt32BE(c)];c+=4;let f=o[c]===75,y=f||o[c]===79?Qt(o,f?d.keys:d.columns,c+=3,s):null;y&&(c=y.i);let{row:T}=Qt(o,d.columns,c+3,s);n(T,{command:"update",relation:d,key:f,old:y&&y.row})},T:()=>{},C:()=>{}}).reduce(a,{})[t[0]](t)}i(Qs,"parse");function Qt(t,e,r,n){let s,a,o,c=n.raw?new Array(e.length):{};for(let d=0;d<e.length;d++)s=t[r++],a=e[d],o=s===110?null:s===117?void 0:a.parser===void 0?t.toString("utf8",r+4,r+=4+t.readUInt32BE(r)):a.parser.array===!0?a.parser(t.toString("utf8",r+5,r+=4+t.readUInt32BE(r))):a.parser(t.toString("utf8",r+4,r+=4+t.readUInt32BE(r))),n.raw?c[d]=n.raw===!0?o:n.value.from?n.value.from(o,a):o:c[a.name]=n.value.from?n.value.from(o,a):o;return{i:r,row:n.row.from?n.row.from(c):c}}i(Qt,"tuples");function Js(t){let e=t.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!e)throw new Error("Malformed subscribe pattern: "+t);let[,r,n,s]=e;return(r||"*")+(n?":"+(n.indexOf(".")===-1?"public."+n:n):"")+(s?"="+s:"")}i(Js,"parseEvent");var Sr=Ke(require("stream"),1);function xr(t,e,r=393216){return new Promise(async(n,s)=>{await t.begin(async a=>{let o;!e&&([{oid:e}]=await a`select lo_creat(-1) as oid`);let[{fd:c}]=await a`select lo_open(${e}, ${r}) as fd`,d={writable:y,readable:f,close:()=>a`select lo_close(${c})`.then(o),tell:()=>a`select lo_tell64(${c})`,read:T=>a`select loread(${c}, ${T}) as data`,write:T=>a`select lowrite(${c}, ${T})`,truncate:T=>a`select lo_truncate64(${c}, ${T})`,seek:(T,S=0)=>a`select lo_lseek64(${c}, ${T}, ${S})`,size:()=>a`
          select
            lo_lseek64(${c}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return n(d),new Promise(async T=>o=T);async function f({highWaterMark:T=2048*8,start:S=0,end:Q=1/0}={}){let W=Q-S;return S&&await d.seek(S),new Sr.default.Readable({highWaterMark:T,async read(E){let ce=E>W?E-W:E;W-=E;let[{data:$}]=await d.read(ce);this.push($),$.length<E&&this.push(null)}})}i(f,"readable");async function y({highWaterMark:T=2048*8,start:S=0}={}){return S&&await d.seek(S),new Sr.default.Writable({highWaterMark:T,write(Q,W,E){d.write(Q).then(()=>E(),E)}})}i(y,"writable")}).catch(s)})}i(xr,"largeObject");Object.assign(Jt,{PostgresError:Ye,toPascal:dt,pascal:vr,toCamel:lt,camel:yr,toKebab:ft,kebab:_r,fromPascal:Bt,fromCamel:Dt,fromKebab:Mt,BigInt:{to:20,from:[20],parse:t=>BigInt(t),serialize:t=>t.toString()}});var fn=Jt;function Jt(t,e){let r=Xs(t,e),n=r.no_subscribe||Tr(Jt,{...r}),s=!1,a=Te(),o=Te(),c=Te(),d=Te(),f=Te(),y=Te(),T=Te(),S=Te(),Q={connecting:o,reserved:c,closed:d,ended:f,open:y,busy:T,full:S},W=[...Array(r.max)].map(()=>Er(r,Q,{onopen:Ue,onend:Ct,onclose:Fe})),E=ce(bt);return Object.assign(E,{get parameters(){return r.parameters},largeObject:xr.bind(null,E),subscribe:n,CLOSE:Et,END:Et,PostgresError:Ye,options:r,listen:$,notify:he,begin:Ne,close:$e,end:v}),E;function ce(p,I){return p.debug=r.debug,Object.entries(r.types).reduce((U,[N,Z])=>(U[N]=L=>new Ee(L,Z.to),U),z),Object.assign(J,{types:z,typed:z,unsafe:ie,array:Me,json:Be,file:X}),J;function z(U,N){return new Ee(U,N)}i(z,"typed");function J(U,...N){let Z=U&&Array.isArray(U.raw)?new de(U,N,p,B):typeof U=="string"&&!N.length?new ut(r.transform.column.to?r.transform.column.to(U):U):new St(U,N);return I&&Z instanceof de&&Z.execute(),Z}i(J,"sql");function ie(U,N=[],Z={}){arguments.length===2&&!Array.isArray(N)&&(Z=N,N=[]);let L=new de([U],N,p,B,{prepare:!1,...Z,simple:"simple"in Z?Z.simple:N.length===0});return I&&L.execute(),L}i(ie,"unsafe");function X(U,N=[],Z={}){arguments.length===2&&!Array.isArray(N)&&(Z=N,N=[]);let L=new de([],N,G=>{dn.default.readFile(U,"utf8",(re,we)=>{if(re)return G.reject(re);G.strings=[we],p(G)})},B,{...Z,simple:"simple"in Z?Z.simple:N.length===0});return I&&L.execute(),L}i(X,"file")}i(ce,"Sql");async function $(p,I,z){let J={fn:I,onlisten:z},ie=$.sql||($.sql=Jt({...r,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries($.channels).forEach(([L,{listeners:G}])=>{delete $.channels[L],Promise.all(G.map(re=>$(L,re.fn,re.onlisten).catch(()=>{})))})},onnotify(L,G){L in $.channels&&$.channels[L].listeners.forEach(re=>re.fn(G))}})),X=$.channels||($.channels={});if(p in X){X[p].listeners.push(J);let L=await X[p].result;return J.onlisten&&J.onlisten(),{state:L.state,unlisten:Z}}X[p]={result:ie`listen ${ie.unsafe('"'+p.replace(/"/g,'""')+'"')}`,listeners:[J]};let N=await X[p].result;return J.onlisten&&J.onlisten(),{state:N.state,unlisten:Z};async function Z(){if(p in X&&(X[p].listeners=X[p].listeners.filter(L=>L!==J),!X[p].listeners.length))return delete X[p],ie`unlisten ${ie.unsafe('"'+p.replace(/"/g,'""')+'"')}`}i(Z,"unlisten")}i($,"listen");async function he(p,I){return await E`select pg_notify(${p}, ${""+I})`}i(he,"notify");async function Ne(p,I){!I&&(I=p,p="");let z=Te(),J=0,ie;try{return await E.unsafe("begin "+p.replace(/[^a-z ]/ig,""),[],{onexecute:U}).execute(),await X(ie,I)}catch(N){throw N}async function X(N,Z,L){let G=ce(ke);G.savepoint=We;let re,we;L&&await G`savepoint ${G(L)}`;try{if(we=await new Promise((K,F)=>{let ve=Z(G);Promise.resolve(Array.isArray(ve)?Promise.all(ve):ve).then(K,F)}),re)throw re}catch(K){throw await(L?G`rollback to ${G(L)}`:G`rollback`),K instanceof Ye&&K.code==="25P02"&&re||K}return!L&&await G`commit`,we;function We(K,F){return K&&Array.isArray(K.raw)?We(ve=>ve.apply(ve,arguments)):(arguments.length===1&&(F=K,K=null),X(N,F,"s"+J+++(K?"_"+K:"")))}i(We,"savepoint");function ke(K){K.catch(F=>re||(re=F)),N.queue===S?z.push(K):N.execute(K)||D(N,S)}i(ke,"handler")}i(X,"scope");function U(N){ie=N,D(N,c),N.reserved=()=>z.length?N.execute(z.shift()):D(N,c)}i(U,"onexecute")}i(Ne,"begin");function D(p,I){p.queue.remove(p),I.push(p),p.queue=I,I===y?p.idleTimer.start():p.idleTimer.cancel()}i(D,"move");function Be(p){return new Ee(p,3802)}i(Be,"json");function Me(p,I){return Array.isArray(p)?new Ee(p,I||(p.length?Gt(p)||25:0),r.shared.typeArrayMap):Me(Array.from(arguments))}i(Me,"array");function bt(p){if(s)return p.reject(q.connection("CONNECTION_ENDED",r,r));if(y.length)return ct(y.shift(),p);if(d.length)return ae(d.shift(),p);T.length?ct(T.shift(),p):a.push(p)}i(bt,"handler");function ct(p,I){return p.execute(I)?D(p,T):D(p,S)}i(ct,"go");function B(p){return new Promise((I,z)=>{p.state?p.active?Er(r).cancel(p.state,I,z):p.cancelled={resolve:I,reject:z}:(a.remove(p),p.cancelled=!0,p.reject(q.generic("57014","canceling statement due to user request")),I())})}i(B,"cancel");async function v({timeout:p=null}={}){if(s)return s;await 1;let I;return s=Promise.race([new Promise(z=>p!==null&&(I=setTimeout(j,p*1e3,z))),Promise.all(W.map(z=>z.end()).concat($.sql?$.sql.end({timeout:0}):[],n.sql?n.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(I))}i(v,"end");async function $e(){await Promise.all(W.map(p=>p.end()))}i($e,"close");async function j(p){for(await Promise.all(W.map(I=>I.terminate()));a.length;)a.shift().reject(q.connection("CONNECTION_DESTROYED",r));p()}i(j,"destroy");function ae(p,I){D(p,o),p.connect(I)}i(ae,"connect");function Ct(p){D(p,f)}i(Ct,"onend");function Ue(p){if(a.length===0)return D(p,y);let I=Math.ceil(a.length/(o.length+1)),z=!0;for(;z&&a.length&&I-- >0;)z=p.execute(a.shift());z?D(p,T):D(p,S)}i(Ue,"onopen");function Fe(p){D(p,d),p.reserved=null,r.onclose&&r.onclose(p.id),a.length&&ae(p,a.shift())}i(Fe,"onclose")}i(Jt,"Postgres");function Xs(t,e){if(t&&t.shared)return t;let r=process.env,n=(typeof t=="string"?e:t)||{},{url:s,multihost:a}=na(t),o=[...s.searchParams].reduce((T,[S,Q])=>(T[S]=Q,T),{}),c=n.hostname||n.host||a||s.hostname||r.PGHOST||"localhost",d=n.port||s.port||r.PGPORT||5432,f=n.user||n.username||s.username||r.PGUSERNAME||r.PGUSER||sa();n.no_prepare&&(n.prepare=!1),o.sslmode&&(o.ssl=o.sslmode,delete o.sslmode),"timeout"in n&&(console.log("The timeout option is deprecated, use idle_timeout instead"),n.idle_timeout=n.timeout);let y={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:ta,max_pipeline:100,backoff:ea,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(c)?c:c.split(",").map(T=>T.split(":")[0]),port:Array.isArray(d)?d:c.split(",").map(T=>parseInt(T.split(":")[1]||d)),path:n.path||c.indexOf("/")>-1&&c+"/.s.PGSQL."+d,database:n.database||n.db||(s.pathname||"").slice(1)||r.PGDATABASE||f,user:f,pass:n.pass||n.password||s.password||r.PGPASSWORD||"",...Object.entries(y).reduce((T,[S,Q])=>(T[S]=S in n?n[S]:S in o?o[S]==="disable"||o[S]==="false"?!1:o[S]:r["PG"+S.toUpperCase()]||Q,T),{}),connection:{application_name:"postgres.js",...n.connection,...Object.entries(o).reduce((T,[S,Q])=>(S in y||(T[S]=Q),T),{})},types:n.types||{},target_session_attrs:qs(n,s,r),onnotice:n.onnotice,onnotify:n.onnotify,onclose:n.onclose,onparameter:n.onparameter,socket:n.socket,transform:ra(n.transform||{undefined:void 0}),parameters:{},shared:{retries:0,typeArrayMap:{}},...en(n.types)}}i(Xs,"parseOptions");function qs(t,e,r){let n=t.target_session_attrs||e.searchParams.get("target_session_attrs")||r.PGTARGETSESSIONATTRS;if(!n||["read-write","read-only","primary","standby","prefer-standby"].includes(n))return n;throw new Error("target_session_attrs "+n+" is not supported")}i(qs,"tsa");function ea(t){return(.5+Math.random()/2)*Math.min(3**t/100,20)}i(ea,"backoff");function ta(){return 60*(30+Math.random()*30)}i(ta,"max_lifetime");function ra(t){return{undefined:t.undefined,column:{from:typeof t.column=="function"?t.column:t.column&&t.column.from,to:t.column&&t.column.to},value:{from:typeof t.value=="function"?t.value:t.value&&t.value.from,to:t.value&&t.value.to},row:{from:typeof t.row=="function"?t.row:t.row&&t.row.from,to:t.row&&t.row.to}}}i(ra,"parseTransform");function na(t){if(typeof t!="string")return{url:{searchParams:new Map}};let e=t;e=e.slice(e.indexOf("://")+3).split(/[?/]/)[0],e=decodeURIComponent(e.slice(e.indexOf("@")+1));let r=new URL(t.replace(e,e.split(",")[0]));return{url:{username:decodeURIComponent(r.username),password:decodeURIComponent(r.password),host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,searchParams:r.searchParams},multihost:e.indexOf(",")>-1&&e}}i(na,"parseUrl");function sa(){try{return ln.default.userInfo().username}catch{return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}i(sa,"osUsername");var R;(function(t){t.assertEqual=s=>s;function e(s){}i(e,"assertIs"),t.assertIs=e;function r(s){throw new Error}i(r,"assertNever"),t.assertNever=r,t.arrayToEnum=s=>{let a={};for(let o of s)a[o]=o;return a},t.getValidEnumValues=s=>{let a=t.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(let c of a)o[c]=s[c];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let a=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(let o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}i(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(R||(R={}));var Or;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Or||(Or={}));var g=R.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Qe=i(t=>{switch(typeof t){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(t)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(t)?g.array:t===null?g.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?g.promise:typeof Map<"u"&&t instanceof Map?g.map:typeof Set<"u"&&t instanceof Set?g.set:typeof Date<"u"&&t instanceof Date?g.date:g.object;default:return g.unknown}},"getParsedType"),h=R.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),aa=i(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),me=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(a){return a.message},n={_errors:[]},s=i(a=>{for(let o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let c=n,d=0;for(;d<o.path.length;){let f=o.path[d];d===o.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(r(o))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}},"processError");return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,R.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};i(me,"ZodError");me.create=t=>new me(t);var Ut=i((t,e)=>{let r;switch(t.code){case h.invalid_type:t.received===g.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case h.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,R.jsonStringifyReplacer)}`;break;case h.unrecognized_keys:r=`Unrecognized key(s) in object: ${R.joinValues(t.keys,", ")}`;break;case h.invalid_union:r="Invalid input";break;case h.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${R.joinValues(t.options)}`;break;case h.invalid_enum_value:r=`Invalid enum value. Expected ${R.joinValues(t.options)}, received '${t.received}'`;break;case h.invalid_arguments:r="Invalid function arguments";break;case h.invalid_return_type:r="Invalid function return type";break;case h.invalid_date:r="Invalid date";break;case h.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:R.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case h.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case h.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case h.custom:r="Invalid input";break;case h.invalid_intersection_types:r="Intersection results could not be merged";break;case h.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case h.not_finite:r="Number must be finite";break;default:r=e.defaultError,R.assertNever(t)}return{message:r}},"errorMap"),mn=Ut;function ia(t){mn=t}i(ia,"setErrorMap");function qt(){return mn}i(qt,"getErrorMap");var er=i(t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,a=[...r,...s.path||[]],o={...s,path:a},c="",d=n.filter(f=>!!f).slice().reverse();for(let f of d)c=f(o,{data:e,defaultError:c}).message;return{...s,path:a,message:s.message||c}},"makeIssue"),oa=[];function _(t,e){let r=er({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,qt(),Ut].filter(n=>!!n)});t.common.issues.push(r)}i(_,"addIssueToContext");var ee=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return O;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r)n.push({key:await s.key,value:await s.value});return ee.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return O;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||s.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}};i(ee,"ParseStatus");var O=Object.freeze({status:"aborted"}),gn=i(t=>({status:"dirty",value:t}),"DIRTY"),fe=i(t=>({status:"valid",value:t}),"OK"),Ar=i(t=>t.status==="aborted","isAborted"),Cr=i(t=>t.status==="dirty","isDirty"),tr=i(t=>t.status==="valid","isValid"),rr=i(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync"),k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(k||(k={}));var _e=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}};i(_e,"ParseInputLazyPath");var hn=i((t,e)=>{if(tr(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new me(t.common.issues);return this._error=r,this._error}}},"handleResult");function C(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:i((o,c)=>o.code!=="invalid_type"?{message:c.defaultError}:typeof c.data>"u"?{message:n??c.defaultError}:{message:r??c.defaultError},"customMap"),description:s}}i(C,"processCreateParams");var A=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Qe(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Qe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ee,ctx:{common:e.parent.common,data:e.data,parsedType:Qe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(rr(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qe(e)},a=this._parseSync({data:e,path:s.path,parent:s});return hn(s,a)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Qe(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(rr(s)?s:Promise.resolve(s));return hn(n,a)}refine(e,r){let n=i(s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r,"getIssueProperties");return this._refinement((s,a)=>{let o=e(s),c=i(()=>a.addIssue({code:h.custom,...n(s)}),"setError");return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ye({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return xe.create(this,this._def)}nullable(){return De.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ge.create(this,this._def)}promise(){return Ze.create(this,this._def)}or(e){return et.create([this,e],this._def)}and(e){return tt.create(this,e,this._def)}transform(e){return new ye({...C(this._def),schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new it({...C(this._def),innerType:this,defaultValue:r,typeName:x.ZodDefault})}brand(){return new $t({typeName:x.ZodBranded,type:this,...C(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new yt({...C(this._def),innerType:this,catchValue:r,typeName:x.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ot.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};i(A,"ZodType");var ca=/^c[^\s-]{8,}$/i,ua=/^[a-z][a-z0-9]*$/,la=/[0-9A-HJKMNP-TV-Z]{26}/,da=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,fa=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,ha=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,pa=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ma=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ga=i(t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$"),"datetimeRegex");function ya(t,e){return!!((e==="v4"||!e)&&pa.test(t)||(e==="v6"||!e)&&ma.test(t))}i(ya,"isValidIP");var pe=class extends A{constructor(){super(...arguments),this._regex=(e,r,n)=>this.refinement(s=>e.test(s),{validation:r,code:h.invalid_string,...k.errToObj(n)}),this.nonempty=e=>this.min(1,k.errToObj(e)),this.trim=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new pe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==g.string){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.string,received:a.parsedType}),O}let n=new ee,s;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){let o=e.data.length>a.value,c=e.data.length<a.value;(o||c)&&(s=this._getOrReturnCtx(e,s),o?_(s,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&_(s,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")fa.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"email",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")ha.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"emoji",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")da.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"uuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")ca.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"cuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")ua.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"cuid2",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")la.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"ulid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),_(s,{validation:"url",code:h.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"regex",code:h.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?ga(a).test(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{code:h.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="ip"?ya(e.data,a.version)||(s=this._getOrReturnCtx(e,s),_(s,{validation:"ip",code:h.invalid_string,message:a.message}),n.dirty()):R.assertNever(a);return{status:n.value,value:e.data}}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...k.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...k.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...k.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...k.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...k.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...k.errToObj(r)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};i(pe,"ZodString");pe.create=t=>{var e;return new pe({checks:[],typeName:x.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...C(t)})};function va(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,a=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return a%o/Math.pow(10,s)}i(va,"floatSafeRemainder");var Oe=class extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.number,received:a.parsedType}),O}let n,s=new ee;for(let a of this._def.checks)a.kind==="int"?R.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:h.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?va(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:h.not_finite,message:a.message}),s.dirty()):R.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,n,s){return new Oe({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:k.toString(s)}]})}_addCheck(e){return new Oe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&R.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};i(Oe,"ZodNumber");Oe.create=t=>new Oe({checks:[],typeName:x.ZodNumber,coerce:t?.coerce||!1,...C(t)});var Ae=class extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==g.bigint){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.bigint,received:a.parsedType}),O}let n,s=new ee;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),_(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):R.assertNever(a);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,n,s){return new Ae({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:k.toString(s)}]})}_addCheck(e){return new Ae({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};i(Ae,"ZodBigInt");Ae.create=t=>{var e;return new Ae({checks:[],typeName:x.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...C(t)})};var Je=class extends A{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==g.boolean){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.boolean,received:n.parsedType}),O}return fe(e.data)}};i(Je,"ZodBoolean");Je.create=t=>new Je({typeName:x.ZodBoolean,coerce:t?.coerce||!1,...C(t)});var je=class extends A{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_type,expected:g.date,received:a.parsedType}),O}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return _(a,{code:h.invalid_date}),O}let n=new ee,s;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),_(s,{code:h.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):R.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new je({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};i(je,"ZodDate");je.create=t=>new je({checks:[],coerce:t?.coerce||!1,typeName:x.ZodDate,...C(t)});var ht=class extends A{_parse(e){if(this._getType(e)!==g.symbol){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.symbol,received:n.parsedType}),O}return fe(e.data)}};i(ht,"ZodSymbol");ht.create=t=>new ht({typeName:x.ZodSymbol,...C(t)});var Xe=class extends A{_parse(e){if(this._getType(e)!==g.undefined){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.undefined,received:n.parsedType}),O}return fe(e.data)}};i(Xe,"ZodUndefined");Xe.create=t=>new Xe({typeName:x.ZodUndefined,...C(t)});var qe=class extends A{_parse(e){if(this._getType(e)!==g.null){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.null,received:n.parsedType}),O}return fe(e.data)}};i(qe,"ZodNull");qe.create=t=>new qe({typeName:x.ZodNull,...C(t)});var Ve=class extends A{constructor(){super(...arguments),this._any=!0}_parse(e){return fe(e.data)}};i(Ve,"ZodAny");Ve.create=t=>new Ve({typeName:x.ZodAny,...C(t)});var Re=class extends A{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fe(e.data)}};i(Re,"ZodUnknown");Re.create=t=>new Re({typeName:x.ZodUnknown,...C(t)});var Se=class extends A{_parse(e){let r=this._getOrReturnCtx(e);return _(r,{code:h.invalid_type,expected:g.never,received:r.parsedType}),O}};i(Se,"ZodNever");Se.create=t=>new Se({typeName:x.ZodNever,...C(t)});var pt=class extends A{_parse(e){if(this._getType(e)!==g.undefined){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.void,received:n.parsedType}),O}return fe(e.data)}};i(pt,"ZodVoid");pt.create=t=>new pt({typeName:x.ZodVoid,...C(t)});var ge=class extends A{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==g.array)return _(r,{code:h.invalid_type,expected:g.array,received:r.parsedType}),O;if(s.exactLength!==null){let o=r.data.length>s.exactLength.value,c=r.data.length<s.exactLength.value;(o||c)&&(_(r,{code:o?h.too_big:h.too_small,minimum:c?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(_(r,{code:h.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(_(r,{code:h.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,c)=>s.type._parseAsync(new _e(r,o,r.path,c)))).then(o=>ee.mergeArray(n,o));let a=[...r.data].map((o,c)=>s.type._parseSync(new _e(r,o,r.path,c)));return ee.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new ge({...this._def,minLength:{value:e,message:k.toString(r)}})}max(e,r){return new ge({...this._def,maxLength:{value:e,message:k.toString(r)}})}length(e,r){return new ge({...this._def,exactLength:{value:e,message:k.toString(r)}})}nonempty(e){return this.min(1,e)}};i(ge,"ZodArray");ge.create=(t,e)=>new ge({type:t,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...C(e)});function At(t){if(t instanceof V){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=xe.create(At(n))}return new V({...t._def,shape:()=>e})}else return t instanceof ge?new ge({...t._def,type:At(t.element)}):t instanceof xe?xe.create(At(t.unwrap())):t instanceof De?De.create(At(t.unwrap())):t instanceof be?be.create(t.items.map(e=>At(e))):t}i(At,"deepPartialify");var V=class extends A{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=R.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==g.object){let f=this._getOrReturnCtx(e);return _(f,{code:h.invalid_type,expected:g.object,received:f.parsedType}),O}let{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Se&&this._def.unknownKeys==="strip"))for(let f in s.data)o.includes(f)||c.push(f);let d=[];for(let f of o){let y=a[f],T=s.data[f];d.push({key:{status:"valid",value:f},value:y._parse(new _e(s,T,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof Se){let f=this._def.unknownKeys;if(f==="passthrough")for(let y of c)d.push({key:{status:"valid",value:y},value:{status:"valid",value:s.data[y]}});else if(f==="strict")c.length>0&&(_(s,{code:h.unrecognized_keys,keys:c}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let f=this._def.catchall;for(let y of c){let T=s.data[y];d.push({key:{status:"valid",value:y},value:f._parse(new _e(s,T,s.path,y)),alwaysSet:y in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let f=[];for(let y of d){let T=await y.key;f.push({key:T,value:await y.value,alwaysSet:y.alwaysSet})}return f}).then(f=>ee.mergeObjectSync(n,f)):ee.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new V({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,a,o,c;let d=(o=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=k.errToObj(e).message)!==null&&c!==void 0?c:d}:{message:d}}}:{}})}strip(){return new V({...this._def,unknownKeys:"strip"})}passthrough(){return new V({...this._def,unknownKeys:"passthrough"})}extend(e){return new V({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new V({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:x.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new V({...this._def,catchall:e})}pick(e){let r={};return R.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new V({...this._def,shape:()=>r})}omit(e){let r={};return R.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new V({...this._def,shape:()=>r})}deepPartial(){return At(this)}partial(e){let r={};return R.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new V({...this._def,shape:()=>r})}required(e){let r={};return R.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof xe;)a=a._def.innerType;r[n]=a}}),new V({...this._def,shape:()=>r})}keyof(){return yn(R.objectKeys(this.shape))}};i(V,"ZodObject");V.create=(t,e)=>new V({shape:()=>t,unknownKeys:"strip",catchall:Se.create(),typeName:x.ZodObject,...C(e)});V.strictCreate=(t,e)=>new V({shape:()=>t,unknownKeys:"strict",catchall:Se.create(),typeName:x.ZodObject,...C(e)});V.lazycreate=(t,e)=>new V({shape:t,unknownKeys:"strip",catchall:Se.create(),typeName:x.ZodObject,...C(e)});var et=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(a){for(let c of a)if(c.result.status==="valid")return c.result;for(let c of a)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let o=a.map(c=>new me(c.ctx.common.issues));return _(r,{code:h.invalid_union,unionErrors:o}),O}if(i(s,"handleResults"),r.common.async)return Promise.all(n.map(async a=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let a,o=[];for(let d of n){let f={...r,common:{...r.common,issues:[]},parent:null},y=d._parseSync({data:r.data,path:r.path,parent:f});if(y.status==="valid")return y;y.status==="dirty"&&!a&&(a={result:y,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;let c=o.map(d=>new me(d));return _(r,{code:h.invalid_union,unionErrors:c}),O}}get options(){return this._def.options}};i(et,"ZodUnion");et.create=(t,e)=>new et({options:t,typeName:x.ZodUnion,...C(e)});var Xt=i(t=>t instanceof nt?Xt(t.schema):t instanceof ye?Xt(t.innerType()):t instanceof st?[t.value]:t instanceof Ce?t.options:t instanceof at?Object.keys(t.enum):t instanceof it?Xt(t._def.innerType):t instanceof Xe?[void 0]:t instanceof qe?[null]:null,"getDiscriminator"),mt=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.object)return _(r,{code:h.invalid_type,expected:g.object,received:r.parsedType}),O;let n=this.discriminator,s=r.data[n],a=this.optionsMap.get(s);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(_(r,{code:h.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),O)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let a of r){let o=Xt(a.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of o){if(s.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);s.set(c,a)}}return new mt({typeName:x.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...C(n)})}};i(mt,"ZodDiscriminatedUnion");function Nr(t,e){let r=Qe(t),n=Qe(e);if(t===e)return{valid:!0,data:t};if(r===g.object&&n===g.object){let s=R.objectKeys(e),a=R.objectKeys(t).filter(c=>s.indexOf(c)!==-1),o={...t,...e};for(let c of a){let d=Nr(t[c],e[c]);if(!d.valid)return{valid:!1};o[c]=d.data}return{valid:!0,data:o}}else if(r===g.array&&n===g.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let a=0;a<t.length;a++){let o=t[a],c=e[a],d=Nr(o,c);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return r===g.date&&n===g.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}i(Nr,"mergeValues");var tt=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=i((a,o)=>{if(Ar(a)||Ar(o))return O;let c=Nr(a.value,o.value);return c.valid?((Cr(a)||Cr(o))&&r.dirty(),{status:r.value,value:c.data}):(_(n,{code:h.invalid_intersection_types}),O)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};i(tt,"ZodIntersection");tt.create=(t,e,r)=>new tt({left:t,right:e,typeName:x.ZodIntersection,...C(r)});var be=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.array)return _(n,{code:h.invalid_type,expected:g.array,received:n.parsedType}),O;if(n.data.length<this._def.items.length)return _(n,{code:h.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),O;!this._def.rest&&n.data.length>this._def.items.length&&(_(n,{code:h.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let a=[...n.data].map((o,c)=>{let d=this._def.items[c]||this._def.rest;return d?d._parse(new _e(n,o,n.path,c)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>ee.mergeArray(r,o)):ee.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new be({...this._def,rest:e})}};i(be,"ZodTuple");be.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new be({items:t,typeName:x.ZodTuple,rest:null,...C(e)})};var rt=class extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.object)return _(n,{code:h.invalid_type,expected:g.object,received:n.parsedType}),O;let s=[],a=this._def.keyType,o=this._def.valueType;for(let c in n.data)s.push({key:a._parse(new _e(n,c,n.path,c)),value:o._parse(new _e(n,n.data[c],n.path,c))});return n.common.async?ee.mergeObjectAsync(r,s):ee.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof A?new rt({keyType:e,valueType:r,typeName:x.ZodRecord,...C(n)}):new rt({keyType:pe.create(),valueType:e,typeName:x.ZodRecord,...C(r)})}};i(rt,"ZodRecord");var gt=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.map)return _(n,{code:h.invalid_type,expected:g.map,received:n.parsedType}),O;let s=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([c,d],f)=>({key:s._parse(new _e(n,c,n.path,[f,"key"])),value:a._parse(new _e(n,d,n.path,[f,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let d of o){let f=await d.key,y=await d.value;if(f.status==="aborted"||y.status==="aborted")return O;(f.status==="dirty"||y.status==="dirty")&&r.dirty(),c.set(f.value,y.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let d of o){let f=d.key,y=d.value;if(f.status==="aborted"||y.status==="aborted")return O;(f.status==="dirty"||y.status==="dirty")&&r.dirty(),c.set(f.value,y.value)}return{status:r.value,value:c}}}};i(gt,"ZodMap");gt.create=(t,e,r)=>new gt({valueType:e,keyType:t,typeName:x.ZodMap,...C(r)});var Pe=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.set)return _(n,{code:h.invalid_type,expected:g.set,received:n.parsedType}),O;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(_(n,{code:h.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(_(n,{code:h.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let a=this._def.valueType;function o(d){let f=new Set;for(let y of d){if(y.status==="aborted")return O;y.status==="dirty"&&r.dirty(),f.add(y.value)}return{status:r.value,value:f}}i(o,"finalizeSet");let c=[...n.data.values()].map((d,f)=>a._parse(new _e(n,d,n.path,f)));return n.common.async?Promise.all(c).then(d=>o(d)):o(c)}min(e,r){return new Pe({...this._def,minSize:{value:e,message:k.toString(r)}})}max(e,r){return new Pe({...this._def,maxSize:{value:e,message:k.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};i(Pe,"ZodSet");Pe.create=(t,e)=>new Pe({valueType:t,minSize:null,maxSize:null,typeName:x.ZodSet,...C(e)});var ze=class extends A{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.function)return _(r,{code:h.invalid_type,expected:g.function,received:r.parsedType}),O;function n(c,d){return er({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qt(),Ut].filter(f=>!!f),issueData:{code:h.invalid_arguments,argumentsError:d}})}i(n,"makeArgsIssue");function s(c,d){return er({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qt(),Ut].filter(f=>!!f),issueData:{code:h.invalid_return_type,returnTypeError:d}})}i(s,"makeReturnsIssue");let a={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof Ze?fe(async(...c)=>{let d=new me([]),f=await this._def.args.parseAsync(c,a).catch(S=>{throw d.addIssue(n(c,S)),d}),y=await o(...f);return await this._def.returns._def.type.parseAsync(y,a).catch(S=>{throw d.addIssue(s(y,S)),d})}):fe((...c)=>{let d=this._def.args.safeParse(c,a);if(!d.success)throw new me([n(c,d.error)]);let f=o(...d.data),y=this._def.returns.safeParse(f,a);if(!y.success)throw new me([s(f,y.error)]);return y.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ze({...this._def,args:be.create(e).rest(Re.create())})}returns(e){return new ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ze({args:e||be.create([]).rest(Re.create()),returns:r||Re.create(),typeName:x.ZodFunction,...C(n)})}};i(ze,"ZodFunction");var nt=class extends A{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};i(nt,"ZodLazy");nt.create=(t,e)=>new nt({getter:t,typeName:x.ZodLazy,...C(e)});var st=class extends A{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return _(r,{received:r.data,code:h.invalid_literal,expected:this._def.value}),O}return{status:"valid",value:e.data}}get value(){return this._def.value}};i(st,"ZodLiteral");st.create=(t,e)=>new st({value:t,typeName:x.ZodLiteral,...C(e)});function yn(t,e){return new Ce({values:t,typeName:x.ZodEnum,...C(e)})}i(yn,"createZodEnum");var Ce=class extends A{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return _(r,{expected:R.joinValues(n),received:r.parsedType,code:h.invalid_type}),O}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return _(r,{received:r.data,code:h.invalid_enum_value,options:n}),O}return fe(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return Ce.create(e)}exclude(e){return Ce.create(this.options.filter(r=>!e.includes(r)))}};i(Ce,"ZodEnum");Ce.create=yn;var at=class extends A{_parse(e){let r=R.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==g.string&&n.parsedType!==g.number){let s=R.objectValues(r);return _(n,{expected:R.joinValues(s),received:n.parsedType,code:h.invalid_type}),O}if(r.indexOf(e.data)===-1){let s=R.objectValues(r);return _(n,{received:n.data,code:h.invalid_enum_value,options:s}),O}return fe(e.data)}get enum(){return this._def.values}};i(at,"ZodNativeEnum");at.create=(t,e)=>new at({values:t,typeName:x.ZodNativeEnum,...C(e)});var Ze=class extends A{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==g.promise&&r.common.async===!1)return _(r,{code:h.invalid_type,expected:g.promise,received:r.parsedType}),O;let n=r.parsedType===g.promise?r.data:Promise.resolve(r.data);return fe(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};i(Ze,"ZodPromise");Ze.create=(t,e)=>new Ze({type:t,typeName:x.ZodPromise,...C(e)});var ye=class extends A{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){let o=s.transform(n.data);return n.common.async?Promise.resolve(o).then(c=>this._def.schema._parseAsync({data:c,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}let a={addIssue:o=>{_(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="refinement"){let o=i(c=>{let d=s.refinement(c,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?O:(c.status==="dirty"&&r.dirty(),o(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?O:(c.status==="dirty"&&r.dirty(),o(c.value).then(()=>({status:r.value,value:c.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!tr(o))return o;let c=s.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>tr(o)?Promise.resolve(s.transform(o.value,a)).then(c=>({status:r.value,value:c})):o);R.assertNever(s)}};i(ye,"ZodEffects");ye.create=(t,e,r)=>new ye({schema:t,typeName:x.ZodEffects,effect:e,...C(r)});ye.createWithPreprocess=(t,e,r)=>new ye({schema:e,effect:{type:"preprocess",transform:t},typeName:x.ZodEffects,...C(r)});var xe=class extends A{_parse(e){return this._getType(e)===g.undefined?fe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};i(xe,"ZodOptional");xe.create=(t,e)=>new xe({innerType:t,typeName:x.ZodOptional,...C(e)});var De=class extends A{_parse(e){return this._getType(e)===g.null?fe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};i(De,"ZodNullable");De.create=(t,e)=>new De({innerType:t,typeName:x.ZodNullable,...C(e)});var it=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===g.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};i(it,"ZodDefault");it.create=(t,e)=>new it({innerType:t,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...C(e)});var yt=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return rr(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new me(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new me(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};i(yt,"ZodCatch");yt.create=(t,e)=>new yt({innerType:t,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...C(e)});var vt=class extends A{_parse(e){if(this._getType(e)!==g.nan){let n=this._getOrReturnCtx(e);return _(n,{code:h.invalid_type,expected:g.nan,received:n.parsedType}),O}return{status:"valid",value:e.data}}};i(vt,"ZodNaN");vt.create=t=>new vt({typeName:x.ZodNaN,...C(t)});var _a=Symbol("zod_brand"),$t=class extends A{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}};i($t,"ZodBranded");var ot=class extends A{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return i(async()=>{let a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?O:a.status==="dirty"?(r.dirty(),gn(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})},"handleAsync")();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?O:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new ot({in:e,out:r,typeName:x.ZodPipeline})}};i(ot,"ZodPipeline");var vn=i((t,e={},r)=>t?Ve.create().superRefine((n,s)=>{var a,o;if(!t(n)){let c=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,d=(o=(a=c.fatal)!==null&&a!==void 0?a:r)!==null&&o!==void 0?o:!0,f=typeof c=="string"?{message:c}:c;s.addIssue({code:"custom",...f,fatal:d})}}):Ve.create(),"custom"),ba={object:V.lazycreate},x;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline"})(x||(x={}));var wa=i((t,e={message:`Input not instance of ${t.name}`})=>vn(r=>r instanceof t,e),"instanceOfType"),_n=pe.create,bn=Oe.create,ka=vt.create,Ea=Ae.create,wn=Je.create,Ta=je.create,Sa=ht.create,xa=Xe.create,Oa=qe.create,Aa=Ve.create,Ca=Re.create,Na=Se.create,Ia=pt.create,ja=ge.create,Ra=V.create,Pa=V.strictCreate,Da=et.create,Ba=mt.create,Ma=tt.create,$a=be.create,Ua=rt.create,La=gt.create,Va=Pe.create,za=ze.create,Za=nt.create,Ga=st.create,Fa=Ce.create,Wa=at.create,Ka=Ze.create,pn=ye.create,Ya=xe.create,Ha=De.create,Qa=ye.createWithPreprocess,Ja=ot.create,Xa=i(()=>_n().optional(),"ostring"),qa=i(()=>bn().optional(),"onumber"),ei=i(()=>wn().optional(),"oboolean"),ti={string:t=>pe.create({...t,coerce:!0}),number:t=>Oe.create({...t,coerce:!0}),boolean:t=>Je.create({...t,coerce:!0}),bigint:t=>Ae.create({...t,coerce:!0}),date:t=>je.create({...t,coerce:!0})},ri=O,H=Object.freeze({__proto__:null,defaultErrorMap:Ut,setErrorMap:ia,getErrorMap:qt,makeIssue:er,EMPTY_PATH:oa,addIssueToContext:_,ParseStatus:ee,INVALID:O,DIRTY:gn,OK:fe,isAborted:Ar,isDirty:Cr,isValid:tr,isAsync:rr,get util(){return R},get objectUtil(){return Or},ZodParsedType:g,getParsedType:Qe,ZodType:A,ZodString:pe,ZodNumber:Oe,ZodBigInt:Ae,ZodBoolean:Je,ZodDate:je,ZodSymbol:ht,ZodUndefined:Xe,ZodNull:qe,ZodAny:Ve,ZodUnknown:Re,ZodNever:Se,ZodVoid:pt,ZodArray:ge,ZodObject:V,ZodUnion:et,ZodDiscriminatedUnion:mt,ZodIntersection:tt,ZodTuple:be,ZodRecord:rt,ZodMap:gt,ZodSet:Pe,ZodFunction:ze,ZodLazy:nt,ZodLiteral:st,ZodEnum:Ce,ZodNativeEnum:at,ZodPromise:Ze,ZodEffects:ye,ZodTransformer:ye,ZodOptional:xe,ZodNullable:De,ZodDefault:it,ZodCatch:yt,ZodNaN:vt,BRAND:_a,ZodBranded:$t,ZodPipeline:ot,custom:vn,Schema:A,ZodSchema:A,late:ba,get ZodFirstPartyTypeKind(){return x},coerce:ti,any:Aa,array:ja,bigint:Ea,boolean:wn,date:Ta,discriminatedUnion:Ba,effect:pn,enum:Fa,function:za,instanceof:wa,intersection:Ma,lazy:Za,literal:Ga,map:La,nan:ka,nativeEnum:Wa,never:Na,null:Oa,nullable:Ha,number:bn,object:Ra,oboolean:ei,onumber:qa,optional:Ya,ostring:Xa,pipeline:Ja,preprocess:Qa,promise:Ka,record:Ua,set:Va,strictObject:Pa,string:_n,symbol:Sa,transformer:pn,tuple:$a,undefined:xa,union:Da,unknown:Ca,void:Ia,NEVER:ri,ZodIssueCode:h,quotelessJson:aa,ZodError:me});function kn(t){let e=t.runtimeEnvStrict??t.runtimeEnv??process.env;if(t.skipValidation)return e;let r=typeof t.client=="object"?t.client:{},n=typeof t.server=="object"?t.server:{},s=typeof t.shared=="object"?t.shared:{},a=H.object(r),o=H.object(n),c=H.object(s),d=t.isServer??typeof window>"u",f=a.merge(c),y=o.merge(c).merge(a),T=d?y.safeParse(e):f.safeParse(e),S=t.onValidationError??(W=>{throw console.error("\u274C Invalid environment variables:",W.flatten().fieldErrors),new Error("Invalid environment variables")}),Q=t.onInvalidAccess??(W=>{throw new Error("\u274C Attempted to access a server-side environment variable on the client")});return T.success===!1?S(T.error):new Proxy(T.data,{get(W,E){if(typeof E=="string")return!d&&t.clientPrefix&&!E.startsWith(t.clientPrefix)&&c.shape[E]===void 0?Q(E):W[E]}})}i(kn,"h");var An=Ke(On());An.default.config();var _t=kn({server:{SCRAPER_API_JOBS_URL:H.string().url(),SCRAPER_API_KEY:H.string().min(1),PG_DATABASE_HOST:H.string().min(1),PG_DATABASE_PORT:H.string().min(1),PG_DATABASE_USER:H.string().min(1),PG_DATABASE_PASS:H.string().min(1),PG_DATABASE_NAME:H.string().min(1),PG_SSL_MODE:H.enum(["disable","require"])},runtimeEnv:process.env});function Cn(t,e){let r={};for(let n of e)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}i(Cn,"collectProperties");async function _i(t){if(t.http.method!=="POST")return{statusCode:405,body:{success:!1,statusCode:405,data:null,message:"Method not allowed"}};let e=fn({host:_t.PG_DATABASE_HOST,port:Number(_t.PG_DATABASE_PORT),database:_t.PG_DATABASE_NAME,user:_t.PG_DATABASE_USER,password:_t.PG_DATABASE_PASS,ssl:_t.PG_SSL_MODE==="require"?"prefer":!1}),n=Cn(t,["status","url","response","singlePage"]),s=H.object({singlePage:H.enum(["yes","no"],{description:"Whether to scrape a single page or not",invalid_type_error:"Single page must be a string"}).default("no").optional(),status:H.string().min(1),url:H.string().url(),response:H.object({body:H.string().min(1)})});try{let a=await s.safeParseAsync(n);return a.success?(await e`insert into scraper_api_data (
      html_data, 
      scraper_api_status, 
      single_page,
      scrape_url
    ) 
    values (
      ${a.data.response.body},
      ${a.data.status},
      ${a.data.singlePage==="yes"},
      ${a.data.url}
    )`,{statusCode:200,body:{success:!0,statusCode:200}}):{statusCode:400,body:{error:"Bad Request"}}}catch(a){return console.error(a),{statusCode:a?.status??500,body:{error:a?.message??"Internal Server Error"}}}finally{await e.end()}}i(_i,"main");0&&(module.exports={main});
